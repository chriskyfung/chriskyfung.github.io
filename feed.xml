<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Chris KY FUNG's Blog</title>
    <description>Feel free to bookmark this to keep an eye on my project updates</description>
    <link>https://chriskyfung.github.io/</link>
    <atom:link href="https://chriskyfung.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 18 Oct 2020 04:34:01 +0000</pubDate>
    <lastBuildDate>Sun, 18 Oct 2020 04:34:01 +0000</lastBuildDate>
    <generator>Jekyll v4.1.1</generator>
    
      <item>
        <title>Qlog: Integrate with Machine Learning APIs: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP329&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/120704?parent=catalog&quot;&gt;GSP329 Integrate with Machine Learning APIs: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an &lt;a href=&quot;https://www.qwiklabs.com/quests/136&quot;&gt;advanced-level&lt;/a&gt; exercise. You will practice the skills and knowledge for getting a service account credentials to run Cloud Vision API, Google Translate API, and BigQuery API via a Python script.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Topics tested&lt;/strong&gt;:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Grant the service account admin privileges for BigQuery and Cloud Storage.&lt;/li&gt;
  &lt;li&gt;Create and download a service account credentials file to provide Google Cloud credentials to a Python application.&lt;/li&gt;
  &lt;li&gt;Modify a Python script to extract text from image files using the Google Cloud Vision API.&lt;/li&gt;
  &lt;li&gt;Modify a Python script to translate text using the Google Translate API.&lt;/li&gt;
  &lt;li&gt;Check which languages are in the extracted data by executing a BigQuery SQL query.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-1-configure-a-service-account-to-access-the-machine-learning-apis-bigquery-and-cloud-storage&quot;&gt;Task 1: Configure a service account to access the Machine Learning APIs, BigQuery, and Cloud Storage&lt;/h2&gt;

&lt;p&gt;In the Cloud Shell, create a new service account that provides credentials for the script using the following commands. (Remember to replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;Your_Project_ID&amp;gt;&lt;/code&gt; with your GCP project ID)&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROJECT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;Your_Project_ID&amp;gt;
gcloud iam service-accounts create my-account &lt;span class=&quot;nt&quot;&gt;--display-name&lt;/span&gt; my-account
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tip 1. You do not need to provide any specific permissions to a service account to access most of the Google Machine Learning APIs such as the Google Cloud Vision and Translation APIs. The Python script does need permissions to access BigQuery and to create objects in Cloud Storage. The easiest way to do that is to bind the service account to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;roles/bigquery.admin&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;roles/storage.admin&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Once you have created the account, bind the BigQuery Admin and Cloud Storage Admin roles to the Service Account to provide the IAM permissions required to process files from Cloud Storage and insert the result data into a BigQuery table.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcloud projects add-iam-policy-binding &lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;serviceAccount:my-account@&lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt;.iam.gserviceaccount.com &lt;span class=&quot;nt&quot;&gt;--role&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;roles/bigquery.admin
gcloud projects add-iam-policy-binding &lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--member&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;serviceAccount:my-account@&lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt;.iam.gserviceaccount.com &lt;span class=&quot;nt&quot;&gt;--role&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;roles/storage.admin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;task-2-create-and-download-a-credential-file-for-your-service-account&quot;&gt;Task 2: Create and download a credential file for your Service Account&lt;/h2&gt;

&lt;p&gt;Run the following commands to download the JSON format IAM credentials file for the service account, and configure the name of the credential file as an environment variable.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcloud iam service-accounts keys create key.json &lt;span class=&quot;nt&quot;&gt;--iam-account&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;my-account@&lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt;.iam.gserviceaccount.com
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;GOOGLE_APPLICATION_CREDENTIALS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;key.json
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tip 2. You must set an environment variable to provide the details of the credentials file that should be used by the Python script to access the Google Cloud APIs.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In the Cloud Console, navigate to &lt;strong&gt;IAM &amp;amp; Admin&lt;/strong&gt; &amp;gt; &lt;strong&gt;Service Accounts&lt;/strong&gt; to confirm the status of the service account (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;my-account&lt;/code&gt;).&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;959&quot; height=&quot;606&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task2-confirm-new-service-account.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;959&quot; height=&quot;606&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task2-confirm-new-service-account.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-3-modify-the-python-script-to-extract-text-from-image-files&quot;&gt;Task 3: Modify the Python script to extract text from image files&lt;/h2&gt;

&lt;p&gt;Navigate to &lt;strong&gt;Storage&lt;/strong&gt; in the Cloud Console, then click on the bucket name to explore the image files and the Python script that have been provided for you.&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1254&quot; height=&quot;945&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-analyze.py-in-cloud-storage-bucket.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1254&quot; height=&quot;945&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-analyze.py-in-cloud-storage-bucket.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Run the following &lt;strong&gt;gsutil&lt;/strong&gt; command to copy the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;analyze-images.py&lt;/code&gt; from the Cloud Storage bucket into the Cloud Shell.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gsutil &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;gs://&lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt;/analyze-images.py &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open the Cloud Shell Editor to review and edit the script file.&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1259&quot; height=&quot;934&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-analyze-image-py-file.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1259&quot; height=&quot;934&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-analyze-image-py-file.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;There are three unfinished parts in the script that you must complete to make the correct Machine Learning API calls. All of them are preceded with a comment using the label &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;# TBD:&lt;/code&gt;. You will need to make use of the Vision API, the Translation API, and the BigQuery API. The import of the Google Cloud Library modules for the required APIs have been done in line 7 of the script file. Note down the name of their API clients that have also been declared from lines 25 to 32.&lt;/p&gt;

&lt;p&gt;In Task 3, you need to add your codes to the following part of the script file.&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;730&quot; height=&quot;531&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-python-code-init.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;730&quot; height=&quot;531&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-python-code-init.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tip 3. You can find details about the Vision API Client &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document_text_detection&lt;/code&gt; API call in the &lt;a href=&quot;https://googleapis.dev/python/vision/latest/gapic/v1/api.html#google.cloud.vision_v1.ImageAnnotatorClientdocument_text_detection&quot;&gt;Python API Documentation reference page for the Vision API Client&lt;/a&gt; and the details of the Vision API annotation response object in the &lt;a href=&quot;https://googleapis.dev/python/vision/latest/gapic/v1/types.html#google.cloud.vision_v1.types.AnnotateImageResponse&quot;&gt;Python API Documentation reference page for the Vision API Objects&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p style=&quot;font-family:monospace&quot;&gt;&lt;strong&gt;TBD&lt;/strong&gt;: Create a Vision API image object called image_object&lt;br /&gt;
&lt;strong&gt;Ref&lt;/strong&gt;: &lt;a href=&quot;https://googleapis.dev/python/vision/latest/gapic/v1/types.html#google.cloud.vision_v1.types.Image&quot;&gt;google.cloud.vision_v1.types.Image&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &lt;span class=&quot;n&quot;&gt;image_object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vision&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;types&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;image_object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_content&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;where &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file_content&lt;/code&gt; is the image content extracted from a JEPG or a PNG file via lines 51 and 52 of the script.&lt;/p&gt;

&lt;p style=&quot;font-family:monospace&quot;&gt;&lt;strong&gt;TBD&lt;/strong&gt;: Detect text in the image and save the response data into an object called response&lt;br /&gt;
&lt;strong&gt;Ref&lt;/strong&gt;: &lt;a href=&quot;https://googleapis.dev/python/vision/latest/gapic/v1/api.html#google.cloud.vision_v1.ImageAnnotatorClient.document_text_detection&quot;&gt;google.cloud.vision_v1.ImageAnnotatorClient.document_text_detection&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vision_client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;document_text_detection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image_object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This line uses the Cloud Vision API to extract text data from each image inside the for loop.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: Make sure that you indent the codes correctly.&lt;/p&gt;

&lt;h2 id=&quot;task-4-modify-the-python-script-to-translate-the-text-using-the-translation-api&quot;&gt;Task 4: Modify the Python script to translate the text using the Translation API&lt;/h2&gt;

&lt;p&gt;In Task 4, you need to add your codes to the following part of the script file.&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;730&quot; height=&quot;416&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task4-python-code-init.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;730&quot; height=&quot;416&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task4-python-code-init.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tip 4. For details about the Translation API Client translate API call, see the &lt;a href=&quot;https://googleapis.dev/python/translation/2.0.1/client.html#google.cloud.translate_v2.client.Client.translate&quot;&gt;Python API Documentation for the Translation V2 API Client&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p style=&quot;font-family:monospace&quot;&gt;&lt;strong&gt;TBD&lt;/strong&gt;: For non EN locales pass the description data to the translation API&lt;br /&gt;
&lt;strong&gt;Ref&lt;/strong&gt;: &lt;a href=&quot;https://googleapis.dev/python/translation/latest/client.html#google.cloud.translate_v2.client.Client.translate&quot;&gt;google.cloud.translate_v2.client.Client.translate&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;            &lt;span class=&quot;c1&quot;&gt;# Set the target_language locale to 'en')
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;translation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;translate_client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;translate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target_language&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'en'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This line uses the Translation API to translate the non-English text into English.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: Make sure that you indent the codes correctly.&lt;/p&gt;

&lt;h2 id=&quot;task-5-identify-the-most-common-non-english-language-used-in-the-signs-in-the-data-set&quot;&gt;Task 5: Identify the most common non-English language used in the signs in the data set&lt;/h2&gt;

&lt;p&gt;In Task 5, you need to remove the comment characters to enable the line of code in the following part of the script.&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;730&quot; height=&quot;167&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task5-python-code-init.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;730&quot; height=&quot;167&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task5-python-code-init.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h3 id=&quot;process-the-image-files-using-the-updated-python&quot;&gt;Process the image files using the updated Python&lt;/h3&gt;

&lt;p&gt;Save the changes and then run the modified script file in the Cloud Shell:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BUCKET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt;
python analyze-images.py &lt;span class=&quot;nv&quot;&gt;$PROJECT&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$BUCKET&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should see an output like that:&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1256&quot; height=&quot;1191&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-to-5-python-results.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1256&quot; height=&quot;1191&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task3-to-5-python-results.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h3 id=&quot;confirm-that-image-data-has-been-successfully-uploaded-to-bigquery&quot;&gt;Confirm that image data has been successfully uploaded to BigQuery&lt;/h3&gt;

&lt;p&gt;Go back to the Cloud Console, navigate to &lt;strong&gt;BigQuery&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Preview the table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;image_text_detail&lt;/code&gt; in the dataset called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;image_classification_dataset&lt;/code&gt; in your project.&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1215&quot; height=&quot;506&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task5-biquery-table-preview.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1215&quot; height=&quot;506&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task5-biquery-table-preview.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Confirm that image data has been successfully processed by running the following Query in BigQuery:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;SELECT locale,COUNT(locale) as lcount FROM image_classification_dataset.image_text_detail GROUP BY locale ORDER BY lcount DESC
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The query results should look like:&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;653&quot; height=&quot;356&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task5-query-results.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;653&quot; height=&quot;356&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-task5-query-results.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;kEEqbeqR6og&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/kEEqbeqR6og&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='kEEqbeqR6og']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP329 Integrate with Machine Learning APIs: Challenge Lab | youtu.be/kEEqbeqR6og&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='kEEqbeqR6og']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP329 Integrate with Machine Learning APIs: Challenge Lab | youtu.be/kEEqbeqR6og&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='kEEqbeqR6og']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP329 Integrate with Machine Learning APIs: Challenge Lab | youtu.be/kEEqbeqR6og&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Overview&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;56&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Confirm&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Vision&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AutoML&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Translation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;BigQuery&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;APIs&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;are&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;enabled&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;04&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;55&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Configure&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;service&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;account&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;access&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Machine&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Learning&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;APIs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;BigQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Storage&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;06&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;download&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;credential&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Service&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Account&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;08&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;05&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Modify&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Python&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;extract&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;files&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Modify&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Python&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;translate&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Translation&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;05&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Identify&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;most&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;common&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;non&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;English&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;language&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;used&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;signs&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;set&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Process&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;files&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;updated&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Python&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Confirm&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;that&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;has&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;been&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;successfully&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uploaded&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;BigQuery&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;References&lt;/strong&gt;:&lt;/p&gt;

&lt;p&gt;ðŸ“Œ Hints for Tasks 1 - 2&lt;br /&gt;
  &lt;a href=&quot;https://www.qwiklabs.com/focuses/1749?parent=catalog&quot;&gt;Classify Text into Categories with the Natural Language API - Qwiklabs&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ðŸ“Œ Hints for Tasks 3 - 5&lt;br /&gt;
  &lt;a href=&quot;https://codelabs.developers.google.com/codelabs/cloud-ml-apis/index.html&quot;&gt;Integrating Machine Learning APIs - Google Codelabs&lt;/a&gt;&lt;/p&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;965&quot; height=&quot;603&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-codelabs-reference.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;965&quot; height=&quot;603&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/gsp329-codelabs-reference.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Keep on reading&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Automate-Interactions-with-Contact-Center-AI-Challenge-Lab&quot;&gt;Qwiklab/Logbook: Automate Interactions with Contact Center AI: Challenge Lab&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Perform-Foundational-Data-ML-and-AI-Tasks-in-Google-Cloud-Challenge-Lab&quot;&gt;Qwiklabs/Logbook: Perform Foundational Data, ML, and AI Tasks in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Useful links&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/1836?parent=catalog&quot;&gt;Extract, Analyze, and Translate Text from Images with the Cloud ML APIs - Qwiklabs&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@ajiltu5467/integrate-with-machine-learning-apis-challenge-lab-tutorial-4ed8c5cb983e&quot;&gt;Integrate with Machine Learning APIs: Challenge Lab Tutorial - by Ajil - Sep, 2020 - Medium&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Wed, 07 Oct 2020 09:30:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Integrate-with-Machine-Learning-APIs-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Integrate-with-Machine-Learning-APIs-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Explore Machine Learning Models with Explainable AI: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP324&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/12011?parent=catalog&quot;&gt;Explore Machine Learning Models with Explainable AI: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an advanced-level exercise. TensorFlow is the dominant AI framework in the industry. You will practice the skills and knowledge in using Cloud AI Platform to build, train and deploy TensorFlow models for machine learning the dataset of Home Mortgage Disclosure Act (HMDA) in New York.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Topics tested&lt;/strong&gt;:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Launching an AI Platform Notebook&lt;/li&gt;
  &lt;li&gt;Downloading and exploring a sample dataset&lt;/li&gt;
  &lt;li&gt;Building and training two different TensorFlow models&lt;/li&gt;
  &lt;li&gt;Deploying models to the Cloud AI Platform&lt;/li&gt;
  &lt;li&gt;Using the What-If Tool to compare the models&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;start-a-jupyterlab-notebook-instance&quot;&gt;Start a JupyterLab Notebook instance&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, in the Search bar, type in &lt;strong&gt;Notebook&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Select &lt;strong&gt;Notebook&lt;/strong&gt; for &lt;strong&gt;AI Platform&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;On the Notebook instances page, click &lt;strong&gt;New Instance&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the Customize instance menu, select the latest version of TensorFlow &lt;em&gt;without&lt;/em&gt; GPUs.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1138&quot; height=&quot;660&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task1-new-tensorflow-notebook-1.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1138&quot; height=&quot;660&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task1-new-tensorflow-notebook-1.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;In the &lt;strong&gt;New notebook instance&lt;/strong&gt; dialog, accept the default options and click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;559&quot; height=&quot;506&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task1-new-tensorflow-notebook-2.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;559&quot; height=&quot;506&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task1-new-tensorflow-notebook-2.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;6&quot;&gt;
  &lt;li&gt;After a few minutes, the AI Platform console will display your instance name, followed by Open Jupyterlab.&lt;br /&gt;&lt;br /&gt;Click &lt;strong&gt;Open JupyterLab&lt;/strong&gt;. Your notebook is now set up.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;download-the-challenge-notebook&quot;&gt;Download the Challenge Notebook&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In your notebook, click the &lt;strong&gt;terminal&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;985&quot; height=&quot;668&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task2-import-dataset-to-jupyter-notebook-1.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;985&quot; height=&quot;668&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task2-import-dataset-to-jupyter-notebook-1.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;2&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Clone the repo:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/GoogleCloudPlatform/training-data-analyst
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;Go to the enclosing folder: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;training-data-analyst/quests/dei&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Open the notebook file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;what-if-tool-challenge.ipynb&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;973&quot; height=&quot;690&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task2-import-dataset-to-jupyter-notebook-2.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;973&quot; height=&quot;690&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task2-import-dataset-to-jupyter-notebook-2.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;Download and import the dataset &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hmda_2017_ny_all-records_labels&lt;/code&gt; by running the first to the eighth cells (the &lt;strong&gt;Get the Train &amp;amp; Test Data&lt;/strong&gt; section).&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;build-and-train-your-models&quot;&gt;Build and train your models&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;In the second cell of the &lt;strong&gt;Train your first model on the complete dataset&lt;/strong&gt; section, add the following lines to create the model.&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequential&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input_dim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'sigmoid'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optimizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'sgd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'mse'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train_labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;epochs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1100&quot; height=&quot;668&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task3-build-and-train-models-1.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1100&quot; height=&quot;668&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task3-build-and-train-models-1.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;2&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Copy the code for training the second model. Modify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;model&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;limited_model&lt;/code&gt; as well as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;train_data, train_labels&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;limited_train_data, limited_train_labels&lt;/code&gt;. The code for the second model should look like the following.&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;limited_model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequential&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;limited_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input_dim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;limited_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dense&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'sigmoid'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;limited_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;optimizer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'sgd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'mse'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;limited_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limited_train_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limited_train_labels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;batch_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;epochs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;964&quot; height=&quot;584&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task3-build-and-train-models-2.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;964&quot; height=&quot;584&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task3-build-and-train-models-2.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;Run the cells in this section and wait for the finish of model training.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;deploy-the-models-to-ai-platform&quot;&gt;Deploy the models to AI Platform&lt;/h2&gt;

&lt;p&gt;Moving on to the &lt;strong&gt;Deploy your models to the AI Platform&lt;/strong&gt; section in the notebook.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Replace the values of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GCP_PROJECT&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MODEL_BUCKET&lt;/code&gt; with your project ID and an unique bucket name.&lt;/li&gt;
  &lt;li&gt;Change the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;REGION&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-west1&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;865&quot; height=&quot;508&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-1.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;865&quot; height=&quot;508&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-1.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;Run those three cells and then confirm the created bucket and the uploaded model files in the Cloud Storage.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;510&quot; height=&quot;166&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task3-build-and-train-models-3.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;510&quot; height=&quot;166&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task3-build-and-train-models-3.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h5 id=&quot;create-your-first-ai-platform-model-complete_model&quot;&gt;Create your first AI Platform model: complete_model&lt;/h5&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;678&quot; height=&quot;251&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-3.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;678&quot; height=&quot;251&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-3.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;The specification for creating AI Platform models listed in the notebook&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Add the following codes to the notebook cells for your COMPLETE model.&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gcloud&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;REGION&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gcloud&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versions&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;VERSION_NAME&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL_NAME&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;framework&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'TensorFlow'&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.1&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL_BUCKET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saved_model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my_model&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;staging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bucket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL_BUCKET&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;3.7&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GCP_PROJECT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p style=&quot;background-color:gold; font-size: smaller&quot;&gt;&lt;strong&gt;Remark&lt;/strong&gt;: The gcloud ai-platform command group should be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;versions&lt;/code&gt; rather than &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;version&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;715&quot; height=&quot;390&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-1st-model-v2.1.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;715&quot; height=&quot;390&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-1st-model-v2.1.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;Create your first AI Platform model: complete_model&lt;br /&gt;(With params --runtime-version=2.1, --python-version=3.7)&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;h5 id=&quot;create-your-second-ai-platform-model-limited_model&quot;&gt;Create your second AI Platform model: limited_model&lt;/h5&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Add the following codes to the notebook cells for your LIMITED model.&lt;/p&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gcloud&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;models&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LIM_MODEL_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regions&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;REGION&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gcloud&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ai&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;versions&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;VERSION_NAME&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LIM_MODEL_NAME&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;framework&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'TensorFlow'&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.1&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL_BUCKET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;saved_limited_model&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;my_limited_model&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;staging&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bucket&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL_BUCKET&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;python&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;3.7&lt;/span&gt; \
&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GCP_PROJECT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p style=&quot;background-color:gold; font-size: smaller&quot;&gt;&lt;strong&gt;Remark&lt;/strong&gt;: The gcloud ai-platform command group should be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;versions&lt;/code&gt; rather than &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;version&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;712&quot; height=&quot;388&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-2nd-model-v2.1.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;712&quot; height=&quot;388&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-2nd-model-v2.1.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;Create your second AI Platform model: limited_model&lt;br /&gt;(With params --runtime-version=2.1, --python-version=3.7)&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;h3 id=&quot;troubleshooting-runtime-version-issue&quot;&gt;Troubleshooting runtime version issue&lt;/h3&gt;

&lt;p&gt;The lab had a serious bug when I was carrying it out on Jun 12, 2020. I couldnâ€™t pass the third checkpoint if set up the AI Platform models according to the lab instruction. The issue seems to be caused by the inconsistencies between the GCP training material and the Qwiklabs marking scheme. While the notebook guided to create the models with runtime version 2.1 and Python 3.7, the checkpoint message specified the required runtime version = 1.14 as shown in the below picture.&lt;/p&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;452&quot; height=&quot;208&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-error.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;452&quot; height=&quot;208&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-error.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;Checkpoint requirement for creating your AI Platform models&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;p&gt;Unfortunately, it still doesnâ€™t work if you just change the runtime version from 2.1 to 1.14. The runtime version 1.14 must be coupled with Python 3.5, according to the &lt;a href=&quot;https://cloud.google.com/ai-platform/prediction/docs/runtime-version-list#runtime-version-support&quot;&gt;AI Platform Documentation&lt;/a&gt;. Thus, after replacing the runtime and Python version numbers, correspondingly, the codes for creating the AI Platform models should be modified as shown below.&lt;/p&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;675&quot; height=&quot;389&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-1st-model-v1.14.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;675&quot; height=&quot;389&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-1st-model-v1.14.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;Create your first AI Platform model: complete_model&lt;br /&gt;(Fixed with --runtime-version=1.14, --python-version=3.5)&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;675&quot; height=&quot;389&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-2nd-model-v1.14.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;675&quot; height=&quot;389&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task4-deploy-models-to-ai-platform-2nd-model-v1.14.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;Create your second AI Platform model: limited_model&lt;br /&gt; (Fixed with --runtime-version=1.14, --python-version=3.5)&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;h2 id=&quot;use-the-what-if-tool-to-explore-biases&quot;&gt;Use the What-If Tool to explore biases&lt;/h2&gt;

&lt;p&gt;Run the last cell in the notebook to activate What-If Tool. Explore the differences between the two models and you should be able to get the answers as follows:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1. In the Performance and Fairness tab, slice by sex (applicant_sex_name_Female). How does the complete model compare to the limited model for females?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;The complete model has equal performance across sexes, whereas the limited model is much worse on females&quot; width=&quot;399&quot; height=&quot;79&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task5-what-if-ttol-1.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;The complete model has equal performance across sexes, whereas the limited model is much worse on females&quot; width=&quot;399&quot; height=&quot;79&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task5-what-if-ttol-1.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;2. Click on one of the datapoints in the middle of the arc. In the datapoint editor, change (applicant_sex_name_Female) to 0, and (applicant_sex_name_Male) to 1. Now run the inference again. How does the model change?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;The limited model has a significantly larger delta than the complete model, whereas the complete model has almost no change&quot; width=&quot;397&quot; height=&quot;85&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task5-what-if-ttol-2.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;The limited model has a significantly larger delta than the complete model, whereas the complete model has almost no change&quot; width=&quot;397&quot; height=&quot;85&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task5-what-if-ttol-2.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;blockquote&gt;
  &lt;p&gt;3. In the Performance and Fairness tab, use the fairness buttons to see the thresholds for the sexes for demographic parity between males and females. How does this change the thresholds for the limited model?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;The thresholds have to be wildly different for the limited model&quot; width=&quot;397&quot; height=&quot;56&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task5-what-if-ttol-3.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;The thresholds have to be wildly different for the limited model&quot; width=&quot;397&quot; height=&quot;56&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp324-task5-what-if-ttol-3.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;UzP2pX1qayA&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/UzP2pX1qayA&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='UzP2pX1qayA']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP324 Explore Machine Learning Models with Explainable AI: Challenge Lab | youtu.be/UzP2pX1qayA&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='UzP2pX1qayA']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP324 Explore Machine Learning Models with Explainable AI: Challenge Lab | youtu.be/UzP2pX1qayA&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='UzP2pX1qayA']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP324 Explore Machine Learning Models with Explainable AI: Challenge Lab | youtu.be/UzP2pX1qayA&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JupyterLab&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Notebook&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;instance&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;43&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Download&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Challenge&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Notebook&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;05&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;38&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Build&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;train&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;models&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Deploy&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;models&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Platform&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;âŒ&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;runtime&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Python&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3.7&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;37&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Use&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;What&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;If&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Tool&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;explore&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;biases&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;47&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Deploy&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;models&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AI&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Platform&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;âœ”ï¸&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Troubleshooting&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;runtime&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;issue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Keep on reading&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Engineer-Data-in-Google-Cloud-Challenge-Lab&quot;&gt;QLogbook: Engineer Data in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Useful links&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/GoogleCloudPlatform/training-data-analyst/blob/master/quests/dei/what-if-tool-challenge.ipynb&quot;&gt;what-if-tool-challenge.ipynb at mGoogleCloudPlatform/training-data-analyst&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tensorflow.org/api_docs/python/tf/keras/Sequential&quot;&gt;tf.keras.Sequential - TensorFlow Core v2&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.tensorflow.org/api_docs/python/tf/keras/layers/Dense&quot;&gt;tf.keras.layers.Dense - TensorFlow Core v2&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloud.google.com/sdk/gcloud/reference/ai-platform&quot;&gt;gcloud ai-platform - Google Cloud SDK Documentation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://pair-code.github.io/what-if-tool/&quot;&gt;What-If Tool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 27 Sep 2020 17:25:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Explore-Machine-Learning-Models-with-Explainable-AI-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Explore-Machine-Learning-Models-with-Explainable-AI-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        <category>TensorFlow</category>
        
        <category>Data Science</category>
        
        <category>Machine Learning</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Build and Manage APIs with Apigee: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP336&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/13360?parent=catalog&quot;&gt;Build and Manage APIs with Apigee: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an expert-level exercise. You will practice the skills and knowledge in the Build and Manage APIs with Apigee.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Topics tested:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Create an API Facade and add functionality&lt;/li&gt;
  &lt;li&gt;Share the APIs with partners through a developer portal&lt;/li&gt;
  &lt;li&gt;Route traffic to different backend implementations of the API&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;The challenge contains 4 required tasks:&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;592&quot; height=&quot;277&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-checkpoints.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;592&quot; height=&quot;277&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-checkpoints.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-1---create-api-specification-and-generate-an-api-proxy&quot;&gt;Task 1 - Create API Specification and Generate an API Proxy&lt;/h2&gt;

&lt;h4 id=&quot;define-a-restful-api-in-apigee-using-an-api-specification&quot;&gt;Define a RESTful API in Apigee using an API specification&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;Login to your Apigee account (&lt;a href=&quot;https://login.apigee.com/login&quot;&gt;https://login.apigee.com/login&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;In the Apigee console, select &lt;strong&gt;Develop&lt;/strong&gt; &amp;gt; &lt;strong&gt;API Proxies&lt;/strong&gt; from the left pane.&lt;/li&gt;
  &lt;li&gt;Click on the &lt;strong&gt;+Proxy&lt;/strong&gt; button to create a new proxy.&lt;/li&gt;
  &lt;li&gt;Create a &lt;strong&gt;Reverse proxy&lt;/strong&gt; by clicking â€œUse OpenAPI Specâ€ as shown in the picture below.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;606&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-create-apigee-proxy.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;606&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-create-apigee-proxy.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;In the &lt;em&gt;Use OpenAPI Spec&lt;/em&gt; dialog, select &lt;strong&gt;Import from URL&lt;/strong&gt; and enter the following values:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;OpenAPI Spec URL&lt;/strong&gt;: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://storage.googleapis.com/apigee-quest/data/ourbank-verification-v1.yaml&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Spec name&lt;/strong&gt;: &lt;em&gt;e.g.&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ourbank-verification-v1&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;605&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-use-openapi-spec-import-from-url-yaml-file.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;605&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-use-openapi-spec-import-from-url-yaml-file.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;6&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Import&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Find the â€œView JSON responseâ€ endpoint URL of Mock Target API from &lt;a href=&quot;https://docs.apigee.com/api-platform/samples/mock-target-api&quot;&gt;this Apigee Doc page&lt;/a&gt;, which is:&lt;/p&gt;

    &lt;pre&gt;&lt;code class=&quot;language-url&quot;&gt;https://mocktarget.apigee.net/json
&lt;/code&gt;&lt;/pre&gt;
  &lt;/li&gt;
  &lt;li&gt;Copy the URL to the field &lt;strong&gt;Target (Existing API)&lt;/strong&gt;, then click &lt;strong&gt;Next&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;745&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-with-mock-target-api.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;745&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-with-mock-target-api.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;9&quot;&gt;
  &lt;li&gt;Check &lt;strong&gt;Add CORS header&lt;/strong&gt; to enable CORS headers in Apigee, then click &lt;strong&gt;Next&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;927&quot; height=&quot;453&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-with-CORS-header.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;927&quot; height=&quot;453&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-with-CORS-header.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;10&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Next&lt;/strong&gt; to continue.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;924&quot; height=&quot;348&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-condition-flows.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;924&quot; height=&quot;348&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-condition-flows.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;11&quot;&gt;
  &lt;li&gt;Check the box next to &lt;strong&gt;default&lt;/strong&gt;, then click &lt;strong&gt;Next&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;913&quot; height=&quot;367&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-virtual-hosts.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;913&quot; height=&quot;367&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-create-proxy-virtual-hosts.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;12&quot;&gt;
  &lt;li&gt;Check the box next to &lt;strong&gt;default&lt;/strong&gt;, then click &lt;strong&gt;Create and deploy&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;889&quot; height=&quot;419&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-create-apigee-proxy-summary.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;889&quot; height=&quot;419&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-create-apigee-proxy-summary.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Apigee now deploys the API proxy into your test environment. Click &lt;strong&gt;Edit proxy&lt;/strong&gt; to view the deployed proxy.&lt;/p&gt;

&lt;h4 id=&quot;provision-a-mock-response-in-apigee&quot;&gt;Provision a Mock Response in Apigee&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In the page of &lt;strong&gt;API Proxies&lt;/strong&gt; &amp;gt; &lt;strong&gt;Verification-API-v1&lt;/strong&gt;, click the &lt;strong&gt;Develop&lt;/strong&gt; tab in the top right.&lt;/li&gt;
  &lt;li&gt;To add a policy to your proxy, click on &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;PreFlow&lt;/strong&gt; in the Navigator tab, then in the Response pipeline, click &lt;strong&gt;+ Step&lt;/strong&gt; to add a step.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1920&quot; height=&quot;1080&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-develop-init.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1920&quot; height=&quot;1080&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-develop-init.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;Select &lt;strong&gt;Assign Message&lt;/strong&gt; from the left menu, then click &lt;strong&gt;Add&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;763&quot; height=&quot;546&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-add-assign-message.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;763&quot; height=&quot;546&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-add-assign-message.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Modify Policy Assign Message-1:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Replace the &lt;strong&gt;Set&lt;/strong&gt; element in the policy with the below.&lt;/p&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;Set&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;Payload&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;contentType=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
       {&quot;valid&quot;:true,&quot;message&quot;:&quot;mock response&quot;}
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/Payload&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/Set&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;After the above procedure, the &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;PreFlow&lt;/strong&gt; should look like the picture below.&lt;/p&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;630&quot; height=&quot;535&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-update-assign-message-policy.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;630&quot; height=&quot;535&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-update-assign-message-policy.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h4 id=&quot;testing&quot;&gt;Testing&lt;/h4&gt;

&lt;p&gt;The deployment can be tested using the following curl statement in the Cloud Shell:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APIGEE_ORG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;YOUR_APIGEE_ORG_NAME&amp;gt;

curl &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; POST &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  https://&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APIGEE_ORG&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-test&lt;/span&gt;.apigee.net/verification-api-v1/verifyCard &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cache-control: no-cache'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'content-type: application/json'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'postman-token: 89236919-eabe-4357-e4c4-079f20ecd798'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'{
    &quot;number&quot;: &quot;2221005276762844&quot;,
    &quot;cvv&quot;: &quot;345&quot;,
    &quot;expiration&quot;: &quot;10/2025&quot;
  } '&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Replace&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;YOUR_APIGEE_ORG_NAME&amp;gt;&lt;/code&gt; with your Apigee organization name.&lt;/p&gt;

&lt;h4 id=&quot;upload-api-proxy-bundle-to-gcs&quot;&gt;Upload API Proxy bundle to GCS&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;Go back to Apigee, click on &lt;strong&gt;Project&lt;/strong&gt; &amp;gt; &lt;strong&gt;Download Revision&lt;/strong&gt; at the top-right of the Deploy tab.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;394&quot; height=&quot;358&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-download-revision.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;394&quot; height=&quot;358&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task1-apigee-proxy-download-revision.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;2&quot;&gt;
  &lt;li&gt;Extract the downloaded zip file to your local storage.&lt;/li&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;Storage&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Create a new bucket.&lt;/li&gt;
  &lt;li&gt;Upload the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apiproxy&lt;/code&gt; folder to the bucket.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-2---add-policies-to-the-api-proxy&quot;&gt;Task 2 - Add Policies to the API Proxy&lt;/h2&gt;

&lt;h4 id=&quot;create-a-service-account-with-permissions-to-write-logs&quot;&gt;Create a service account with permissions to write logs&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;IAM &amp;amp; admin&lt;/strong&gt; &amp;gt; &lt;strong&gt;Service accounts&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click &lt;strong&gt;Create Service Account&lt;/strong&gt;, then enter the following:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Service account name: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apigee-stackdriver&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;Service account description: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Service account for Apigee Stackdriver integration&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create&lt;/strong&gt; to continue.&lt;/li&gt;
  &lt;li&gt;Click into &lt;strong&gt;Select a Role&lt;/strong&gt; field and choose &lt;strong&gt;Logging&lt;/strong&gt; &amp;gt; &lt;strong&gt;Logs Writer&lt;/strong&gt; permission. Click &lt;strong&gt;Continue&lt;/strong&gt; then click &lt;strong&gt;Done&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;After creating service account â€˜apigee-stackdriverâ€™, click on three dots at the right corner and click &lt;strong&gt;Create Key&lt;/strong&gt; in the dropdown, then &lt;strong&gt;Create&lt;/strong&gt; to download your JSON output.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;create-an-extension-and-deploy-it-to-test-the-environment-using-this-service-account&quot;&gt;Create an extension and deploy it to test the environment using this service account&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;Go back to Apigee, naviagte to &lt;strong&gt;Admin&lt;/strong&gt; &amp;gt; &lt;strong&gt;Extensions&lt;/strong&gt; from the left navigation menu, then &lt;strong&gt;+ Add Extension&lt;/strong&gt; to create a new extension.&lt;/li&gt;
  &lt;li&gt;On the new Extension Properties page, click on the &lt;strong&gt;Google Stackdriver Logging&lt;/strong&gt; extension.&lt;/li&gt;
  &lt;li&gt;Enter a name (e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stackdriver-logging-extension&lt;/code&gt;) and an optional description for the Extension instance, then click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;On the Extension detail page, click the arrow (&amp;gt;) for the test environment to configure the instance for the Apigee environment.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;In the configuration dialog. enter the following information:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Select the latest extension version from the Version drop-down list.&lt;/li&gt;
      &lt;li&gt;Add your GCP Project ID (which you can get from the Home Console).&lt;/li&gt;
      &lt;li&gt;Open the downloaded JSON file and copy/paste the contents into the Credential field in the Apigee UI.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Save&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Once the configuration is saved, click on the &lt;strong&gt;Deploy&lt;/strong&gt; button for the Test environment.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;650&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-create-apigee-stackdriver-logging-extension.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1158&quot; height=&quot;650&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-create-apigee-stackdriver-logging-extension.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h4 id=&quot;create-an-extension-policy-in-the-postflow-response-path&quot;&gt;Create an Extension policy in the PostFlow response path&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In Apigee, navigate to &lt;strong&gt;Develop&lt;/strong&gt; &amp;gt; &lt;strong&gt;API Proxies&lt;/strong&gt; from the left menu.&lt;/li&gt;
  &lt;li&gt;Click to open &lt;strong&gt;Verification-API-v1&lt;/strong&gt; from the proxy list.&lt;/li&gt;
  &lt;li&gt;Click the &lt;strong&gt;Develop&lt;/strong&gt; tab in the top right.&lt;/li&gt;
  &lt;li&gt;To add a policy to your proxy, click on &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;PostFlow&lt;/strong&gt; in the Navigator tab, then in the &lt;em&gt;Response&lt;/em&gt; pipeline, click &lt;strong&gt;+ Step&lt;/strong&gt; to add a step.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;717&quot; height=&quot;464&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-policy-to-postflow-response-pipeline.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;717&quot; height=&quot;464&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-policy-to-postflow-response-pipeline.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;In the left menu scroll down to the end, then select &lt;strong&gt;Extension Callout&lt;/strong&gt;. Select your extension name from the &lt;strong&gt;Extension&lt;/strong&gt; dropdown menu. Select &lt;strong&gt;Log&lt;/strong&gt; from the Actions dropdown. Click &lt;strong&gt;Add&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;766&quot; height=&quot;549&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-extension-callout-for-stackdriver-logging.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;766&quot; height=&quot;549&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-extension-callout-for-stackdriver-logging.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;6&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Modify Policy Extension Callout-1:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;Replace the &lt;strong&gt;Input&lt;/strong&gt; element in the policy with the below (make sure indentation is correct)&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PROJECT_ID_HERE&lt;/code&gt; with GCP Project ID for this lab.&lt;/p&gt;

        &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;Input&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;![CDATA[
    {  &quot;logName&quot;: &quot;example-log&quot;,
       &quot;resource&quot;: {
           &quot;type&quot;: &quot;global&quot;,
           &quot;labels&quot;: {
               &quot;project_id&quot;: &quot;PROJECT_ID_HERE&quot;
           }
       },
        &quot;message&quot;: {&quot;Action&quot;:&quot;{request.verb}&quot;,&quot;ClientIP&quot;: &quot;{client.ip}&quot;, &quot;developerApp&quot;: &quot;{developer.app.name}&quot;, &quot;apiKeyParam&quot;:&quot;{request.queryparam.apikey}&quot;,&quot;responsePayload&quot;: {response.content}}
   }
 ]]&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/Input&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;After the above procedure, the &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;PostFlow&lt;/strong&gt; should look like the picture below.&lt;/p&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;772&quot; height=&quot;625&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-update-extension-callout-policy.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;772&quot; height=&quot;625&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-update-extension-callout-policy.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h4 id=&quot;add-api-key-verification&quot;&gt;Add API Key verification&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;To add a policy to your proxy, click on &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;PreFlow&lt;/strong&gt; in the Navigator tab, then in the &lt;em&gt;Response&lt;/em&gt; pipeline, click &lt;strong&gt;+ Step&lt;/strong&gt; to add a step.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;859&quot; height=&quot;428&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-api-key-verification-policy-to-preflow-request-pipeline.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;859&quot; height=&quot;428&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-api-key-verification-policy-to-preflow-request-pipeline.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;2&quot;&gt;
  &lt;li&gt;Select &lt;strong&gt;Verify API Key&lt;/strong&gt; from the left menu, then click &lt;strong&gt;Add&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;754&quot; height=&quot;536&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-api-key-verification-policy.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;754&quot; height=&quot;536&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-add-api-key-verification-policy.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;After the above procedure, the &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;PreFlow&lt;/strong&gt; should look like the picture below.&lt;/p&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;866&quot; height=&quot;449&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-preflow-with-api-key-verification-policy.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;866&quot; height=&quot;449&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task2-apigee-proxy-preflow-with-api-key-verification-policy.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h4 id=&quot;create-an-api-product-and-an-app&quot;&gt;Create an API Product and an App&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In Apigee, navigate to &lt;strong&gt;Publish&lt;/strong&gt; &amp;gt; &lt;strong&gt;API Products&lt;/strong&gt; from the left menu. Then Click &lt;strong&gt;+ API Product&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Create a new API product with the following details:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Name&lt;/strong&gt;: &lt;em&gt;e.g.&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ourBank API&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Display Name&lt;/strong&gt;: &lt;em&gt;e.g.&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ourBank API&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Environment&lt;/strong&gt;: Check &lt;strong&gt;test&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Access&lt;/strong&gt;: Select &lt;strong&gt;Public&lt;/strong&gt; from the dropdown menu&lt;/li&gt;
      &lt;li&gt;In the API resources section, &lt;strong&gt;API proxies&lt;/strong&gt; list, click &lt;strong&gt;Add a proxy&lt;/strong&gt; and select the &lt;strong&gt;Verification-API-v1&lt;/strong&gt; API proxy. Click &lt;strong&gt;Add(1)&lt;/strong&gt;.&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;The settings should look as follows:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1152&quot; height=&quot;899&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-create-apigee-api-product.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1152&quot; height=&quot;899&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-create-apigee-api-product.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Save&lt;/strong&gt; to create the new API product.&lt;/li&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;Publish&lt;/strong&gt; &amp;gt; &lt;strong&gt;Apps&lt;/strong&gt; from the left menu. Then Click &lt;strong&gt;+ App&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Enter the following:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Name&lt;/strong&gt;: &lt;em&gt;e.g.&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ourBank App&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Display Name&lt;/strong&gt;: &lt;em&gt;e.g.&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ourBank App&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Company / Developer&lt;/strong&gt;: Developer&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Developer&lt;/strong&gt;: Use the helloworld@apigee.com developer account (which has been pre-populated for the Apigee trial environment).&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Within the Credentials section, click the &lt;strong&gt;Add product&lt;/strong&gt; button.&lt;/li&gt;
  &lt;li&gt;Select &lt;strong&gt;ourBank API&lt;/strong&gt; from the list and click &lt;strong&gt;Add (1)&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Review that the configuration looks as below, and click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1152&quot; height=&quot;899&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-create-apigee-app.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1152&quot; height=&quot;899&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-create-apigee-app.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;9&quot;&gt;
  &lt;li&gt;Once the app is created, the page displays details about the app credentials. Click &lt;strong&gt;Show&lt;/strong&gt; on the Key row then copy the API key.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;testing-1&quot;&gt;Testing&lt;/h4&gt;

&lt;p&gt;Replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;APP_API_KEY&amp;gt;&lt;/code&gt; with the key from the app credentials. Then, run the following curl statement in the Cloud Shell:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APIKEY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;APP_API_KEY&amp;gt;

curl &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; POST &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  https://&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APIEE_ORG&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-test&lt;/span&gt;.apigee.net/verification-api-v1/verifyCard?apikey&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APIKEY&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cache-control: no-cache'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'content-type: application/json'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'postman-token: 89236919-eabe-4357-e4c4-079f20ecd798'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'{
    &quot;number&quot;: &quot;2221005276762844&quot;,
    &quot;cvv&quot;: &quot;345&quot;,
    &quot;expiration&quot;: &quot;10/2025&quot;
  } '&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Successful response message:&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;valid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;mock response&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Error response message:&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;fault&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;faultstring&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Invalid ApiKey&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;detail&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;errorcode&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;oauth.v2.InvalidApiKey&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;task-3---create-a-developer-portal-for-consuming-the-apis&quot;&gt;Task 3 - Create a Developer Portal for consuming the APIs&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In Apigee, navigate to &lt;strong&gt;Publish&lt;/strong&gt; &amp;gt; &lt;strong&gt;Portals&lt;/strong&gt; from the left menu. Then Click &lt;strong&gt;+ Portal&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Enter a name, &lt;em&gt;e.g.&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ourBank Develop&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;618&quot; height=&quot;390&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-apigee-create-portal.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;618&quot; height=&quot;390&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-apigee-create-portal.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;Select &lt;strong&gt;APIs&lt;/strong&gt; from the dropdown menu at the top.&lt;/li&gt;
  &lt;li&gt;In the â€œPublish an API productâ€ page, click on &lt;strong&gt;Get started&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Select the API Product (&lt;em&gt;ourBank API&lt;/em&gt;) and click &lt;strong&gt;Next&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;812&quot; height=&quot;381&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-apigee-add-api-product-to-portal.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;812&quot; height=&quot;381&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-apigee-add-api-product-to-portal.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;6&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Next&lt;/strong&gt; &amp;gt; &lt;strong&gt;Next&lt;/strong&gt; &amp;gt; &lt;strong&gt;Finish&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Live Portal&lt;/strong&gt; at the top-right corner to test the new developer portal.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;962&quot; height=&quot;639&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-apigee-live-portal.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;962&quot; height=&quot;639&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task3-apigee-live-portal.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-4---route-traffic-from-mock-response-to-real-backend&quot;&gt;Task 4 - Route traffic from mock response to real backend&lt;/h2&gt;

&lt;h4 id=&quot;deploy-the-real-backend-on-cloud-function&quot;&gt;Deploy the real backend on Cloud Function&lt;/h4&gt;

&lt;p&gt;Go the Cloud Shell, run the commands given in the lab.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &lt;span class=&quot;c&quot;&gt;# Make subdirectories for the code&lt;/span&gt;
   &lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;bank-verification-service&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;bank-verification-service

   &lt;span class=&quot;c&quot;&gt;# Download the code&lt;/span&gt;
   wget https://storage.googleapis.com/apigee-quest/code/index.js
   wget https://storage.googleapis.com/apigee-quest/code/package.json

   &lt;span class=&quot;c&quot;&gt;# Deploy card verification function&lt;/span&gt;
   gcloud functions deploy verifyCard &lt;span class=&quot;nt&quot;&gt;--runtime&lt;/span&gt; nodejs10 &lt;span class=&quot;nt&quot;&gt;--trigger-http&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--allow-unauthenticated&lt;/span&gt;

   &lt;span class=&quot;c&quot;&gt;# Deploy address verification function&lt;/span&gt;
   gcloud functions deploy verifyAddress &lt;span class=&quot;nt&quot;&gt;--runtime&lt;/span&gt; nodejs10 &lt;span class=&quot;nt&quot;&gt;--trigger-http&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--allow-unauthenticated&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;route-traffic-to-these-backends-based-on-the-incoming-requests&quot;&gt;Route traffic to these backends based on the incoming requests&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;Go back to Apigee, navigate to &lt;strong&gt;API Proxies&lt;/strong&gt; &amp;gt; &lt;strong&gt;Verification-API-v1&lt;/strong&gt;, click the &lt;strong&gt;Develop&lt;/strong&gt; tab in the top right.&lt;/li&gt;
  &lt;li&gt;To rename the mock API endpoint, click on &lt;strong&gt;Target Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;default&lt;/strong&gt; in the Navigator tab. Replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;TargetEndpoint name=&quot;default&quot;&amp;gt;&lt;/code&gt; to &lt;TargetEndpoint name=&quot;mock&quot;&gt;.&lt;/TargetEndpoint&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;477&quot; height=&quot;261&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-rename-mock-target-endpoint.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;477&quot; height=&quot;261&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-rename-mock-target-endpoint.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;To add a new target endpoint, click on the plus sign (&lt;strong&gt;+&lt;/strong&gt;) next to &lt;strong&gt;Target Endpoints&lt;/strong&gt; in the Navigator tab.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;281&quot; height=&quot;119&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-add-new-target-endpoint.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;281&quot; height=&quot;119&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-add-new-target-endpoint.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Enter the following:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Target Endpoint Name&lt;/strong&gt;: &lt;em&gt;e.g.&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cloud&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;HTTP Target&lt;/strong&gt;: _The Cloud Function Endpoint (e.g. https://&lt;REGION&gt;-&lt;PROJECT-ID&gt;.cloudfunctions.net)_&lt;/PROJECT-ID&gt;&lt;/REGION&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;698&quot; height=&quot;457&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-add-new-target-endpoint-cloud.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;698&quot; height=&quot;457&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-add-new-target-endpoint-cloud.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;Click on &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;default&lt;/strong&gt; in the Navigator tab. Remove the &lt;strong&gt;Assign Message-1&lt;/strong&gt; from the Response pipeline.&lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;Target Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;mock&lt;/strong&gt; â†’ &lt;strong&gt;PreFlow&lt;/strong&gt; in the Navigator tab. Remove the &lt;strong&gt;Assign Message-1&lt;/strong&gt; from the Response pipeline. Drag the &lt;strong&gt;Assign Message-1&lt;/strong&gt; from &lt;strong&gt;Policies&lt;/strong&gt; in the Navigator tab to the Response pipeline.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;865&quot; height=&quot;482&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-mock-target-endpoint-preflow.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;865&quot; height=&quot;482&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-mock-target-endpoint-preflow.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;7&quot;&gt;
  &lt;li&gt;Click on &lt;strong&gt;Target Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;cloud&lt;/strong&gt; â†’ &lt;strong&gt;PreFlow&lt;/strong&gt; in the Navigator tab. Drag the &lt;strong&gt;Add CORS&lt;/strong&gt; from &lt;strong&gt;Policies&lt;/strong&gt; in the Navigator tab to the Response pipeline.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click on &lt;strong&gt;Proxy Endpoints&lt;/strong&gt; â†’ &lt;strong&gt;default&lt;/strong&gt; â†’ &lt;strong&gt;PreFlow&lt;/strong&gt; in the Navigator tab. Replace the &lt;strong&gt;RouteRule&lt;/strong&gt; tag with the following code,&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;RouteRule&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mock&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;Condition&amp;gt;&lt;/span&gt;request.queryparam.mock = &quot;true&quot;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/Condition&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;TargetEndpoint&amp;gt;&lt;/span&gt;mock&lt;span class=&quot;nt&quot;&gt;&amp;lt;/TargetEndpoint&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/RouteRule&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;RouteRule&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;default&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;TargetEndpoint&amp;gt;&lt;/span&gt;cloud&lt;span class=&quot;nt&quot;&gt;&amp;lt;/TargetEndpoint&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/RouteRule&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;474&quot; height=&quot;153&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-proxy-endpoint-preflow-routerules.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;474&quot; height=&quot;153&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp336-task4-apigee-proxy-endpoint-preflow-routerules.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;9&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Save&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;testing-2&quot;&gt;Testing&lt;/h4&gt;

&lt;p&gt;Test the real backend routing using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl&lt;/code&gt; statement below.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; POST &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   https://&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APIEE_ORG&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-test&lt;/span&gt;.apigee.net/verification-api-v1/verifyCard?apikey&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APIKEY&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cache-control: no-cache'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'content-type: application/json'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'postman-token: 89236919-eabe-4357-e4c4-079f20ecd798'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'{
      &quot;number&quot;: &quot;2221005276762844&quot;,
      &quot;cvv&quot;: &quot;345&quot;,
      &quot;expiration&quot;: &quot;10/2025&quot;
   } '&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Expected output:&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;valid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;credit card is valid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test the mock response routing using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl&lt;/code&gt; statement below.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; POST &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;s1&quot;&gt;'https://${APIEE_ORG}-test.apigee.net/verification-api-v1/verifyCard?mock=true&amp;amp;apikey=${APIKEY}'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cache-control: no-cache'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'content-type: application/json'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'postman-token: 89236919-eabe-4357-e4c4-079f20ecd798'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'{
      &quot;number&quot;: &quot;2221005276762844&quot;,
      &quot;cvv&quot;: &quot;345&quot;,
      &quot;expiration&quot;: &quot;10/2025&quot;
   } '&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Expected output:&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;valid&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;mock response&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;Hcs40i_2o0E&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/Hcs40i_2o0E&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='Hcs40i_2o0E']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP336 Build and Manage APIs with Apigee: Challenge Lab | youtu.be/Hcs40i_2o0E&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='Hcs40i_2o0E']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP336 Build and Manage APIs with Apigee: Challenge Lab | youtu.be/Hcs40i_2o0E&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='Hcs40i_2o0E']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP336 Build and Manage APIs with Apigee: Challenge Lab | youtu.be/Hcs40i_2o0E&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Define&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;RESTful&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Apigee&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;specification&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;02&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;35&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Provision&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Mock&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Response&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Apigee&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Assign&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Message&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Policy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;06&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Test&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;deployment&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Upload&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Proxy&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bundle&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;GCS&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;05&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;service&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;account&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;permissions&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;write&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;logs&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;06&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Google&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;StackdriverLogging&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;extension&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;07&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Extension&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;policy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PostFlow&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Key&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;verification&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;API&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Product&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;An&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Test&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;deployment&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Developer&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Portal&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;consuming&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;APIs&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Deploy&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;real&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;backend&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;traffic&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mock&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;real&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;backend&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Test&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;deployment&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sun, 13 Sep 2020 06:25:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Build-and-Manage-APIs-with-Apigee-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Build-and-Manage-APIs-with-Apigee-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        <category>Apigee</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Perform Foundational Data, ML, and AI Tasks in Google Cloud: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP323&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/11044?parent=catalog&quot;&gt;Perform Foundational Data, ML, and AI Tasks in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an expert-level exercise. You will practice the skills and knowledge for running Dataflow, Dataproc and Dataprep as well as Google Cloud Speedch API.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The challenge contains 4 required tasks:&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Task 1: Run a simple Dataflow job. Task 2: Run a simple Dataproc job. Task 3: Run a simple Dataprep job. Task 4: AI.&quot; width=&quot;599&quot; height=&quot;246&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-checkpoints.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Task 1: Run a simple Dataflow job. Task 2: Run a simple Dataproc job. Task 3: Run a simple Dataprep job. Task 4: AI.&quot; width=&quot;599&quot; height=&quot;246&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-checkpoints.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-1-run-a-simple-dataflow-job&quot;&gt;Task 1: Run a simple Dataflow job&lt;/h2&gt;

&lt;p&gt;In this task, you have to transfer the data in a CSV file to BigQuery using Dataflow via Pub/Sub. First of all, you need to create a BigQuery dataset called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lab&lt;/code&gt; and a Cloud Storage bucket called with your project ID.&lt;/p&gt;

&lt;h4 id=&quot;11-created-a-bigquery-dataset-called-lab&quot;&gt;1.1 Created a BigQuery dataset called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lab&lt;/code&gt;&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;BigQuery&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Select your project in the left pane.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE DATASET&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lab&lt;/code&gt; in the Dataset ID, then click &lt;strong&gt;Create dataset&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;487&quot; height=&quot;377&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task1-create-bigquery-dataset.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;487&quot; height=&quot;377&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task1-create-bigquery-dataset.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h5 id=&quot;optional&quot;&gt;Optional&lt;/h5&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gsutil cp gs://cloud-training/gsp323/lab.schema .&lt;/code&gt; in the Cloud Shell to download the schema file.&lt;/li&gt;
  &lt;li&gt;View the schema by running &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cat lab.schema&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;374&quot; height=&quot;212&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task-1-bigquery-table-schema.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;374&quot; height=&quot;212&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task-1-bigquery-table-schema.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;7&quot;&gt;
  &lt;li&gt;Go back to the Cloud Console, select the new dataset &lt;strong&gt;lab&lt;/strong&gt; and click &lt;strong&gt;Create Table&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the Create table dialog, select &lt;strong&gt;Google Cloud Storage&lt;/strong&gt; from the dropdown in the Source section.&lt;/li&gt;
  &lt;li&gt;Copy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gs://cloud-training/gsp323/lab.csv&lt;/code&gt; to &lt;strong&gt;Select file from GCS bucket&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;customers&lt;/code&gt; to â€œTable nameâ€ in the Destination section.&lt;/li&gt;
  &lt;li&gt;Enable &lt;strong&gt;Edit as text&lt;/strong&gt; and copy the JSON data from the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lab.schema&lt;/code&gt; file to the textarea in the Schema section.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create table&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;673&quot; height=&quot;886&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task-1-bigquery-creat-table-from-csv.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;673&quot; height=&quot;886&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task-1-bigquery-creat-table-from-csv.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h4 id=&quot;12-create-a-cloud-storage-bucket&quot;&gt;1.2 Create a Cloud Storage bucket&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;Storage&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE BUCKET&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Copy your GCP Project ID to Name your bucket.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;13-create-a-dataflow-job&quot;&gt;1.3 Create a Dataflow job&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;Dataflow&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE JOB FROM TEMPLATE&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In Create job from template, give an arbitrary job name.&lt;/li&gt;
  &lt;li&gt;From the dropdown under Dataflow template, select &lt;strong&gt;Text Files on Cloud Storage Pub/Sub&lt;/strong&gt; under â€œProcess Data in Bulk (batch)â€. (&lt;strong&gt;DO NOT&lt;/strong&gt; select the item under â€œProcess Data Continuously (stream)â€).&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;610&quot; height=&quot;562&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task1-dataflow-create-job-from-template.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;610&quot; height=&quot;562&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task1-dataflow-create-job-from-template.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Under the Required parameters, enter the following values:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;JavaScript UDF path in Cloud Storage&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gs://cloud-training/gsp323/lab.js&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;JSON path&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gs://cloud-training/gsp323/lab.schema&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;JavaScript UDF name&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;transform&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;BigQuery output table&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YOUR_PROJECT:lab.customers&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Cloud Storage input path&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gs://cloud-training/gsp323/lab.csv&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Temporary BigQuery directory&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gs://YOUR_PROJECT/bigquery_temp&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Temporary location&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gs://YOUR_PROJECT/temp&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;p&gt;&lt;strong&gt;Replace&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YOUR_PROJECT&lt;/code&gt; with your project ID.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;928&quot; height=&quot;840&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task1-data-flow-required-parameter.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;928&quot; height=&quot;840&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task1-data-flow-required-parameter.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;6&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;RUN JOB&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-2-run-a-simple-dataproc-job&quot;&gt;Task 2: Run a simple Dataproc job&lt;/h2&gt;

&lt;h3 id=&quot;create-a-dataproc-cluster&quot;&gt;Create a Dataproc cluster&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;Dataproc&lt;/strong&gt; &amp;gt; &lt;strong&gt;Clusters&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE CLUSTER&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Make sure the cluster is going to create in the region &lt;strong&gt;us-central1&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;After the cluster has been created, clik the &lt;strong&gt;SSH&lt;/strong&gt; button in the row of the master instance.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1269&quot; height=&quot;501&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task2-dataproc-ssh.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1269&quot; height=&quot;501&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task2-dataproc-ssh.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;In the SSH console, run the following command:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hdfs dfs &lt;span class=&quot;nt&quot;&gt;-cp&lt;/span&gt; gs://cloud-training/gsp323/data.txt /data.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Close the SSH window and go back to the Cloud Console.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;SUBMIT JOB&lt;/strong&gt; in the cluster details page.&lt;/li&gt;
  &lt;li&gt;Select &lt;strong&gt;Spark&lt;/strong&gt; from the dropdown of â€œJob typeâ€.&lt;/li&gt;
  &lt;li&gt;Copy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.spark.examples.SparkPageRank&lt;/code&gt; to â€œMain class or jarâ€.&lt;/li&gt;
  &lt;li&gt;Copy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file:///usr/lib/spark/examples/jars/spark-examples.jar&lt;/code&gt; to â€œJar filesâ€.&lt;/li&gt;
  &lt;li&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/data.txt&lt;/code&gt; to â€œArgumentsâ€.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;542&quot; height=&quot;811&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task2-dataprop-submit-a-job.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;542&quot; height=&quot;811&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task2-dataprop-submit-a-job.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;13&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-3-run-a-simple-dataprep-job&quot;&gt;Task 3: Run a simple Dataprep job&lt;/h2&gt;

&lt;h3 id=&quot;import-runscsv-to-dataprep&quot;&gt;Import runs.csv to Dataprep&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;Dataprep&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;After enter the home page of Cloud Dataprep, click the &lt;strong&gt;Import Data&lt;/strong&gt; button.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1248&quot; height=&quot;589&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-home.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1248&quot; height=&quot;589&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-home.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;In the Import Data page, select &lt;strong&gt;GCS&lt;/strong&gt; in the left pane.&lt;/li&gt;
  &lt;li&gt;Click on the pencil icon under Choose a file or folder.&lt;/li&gt;
  &lt;li&gt;Copy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gs://cloud-training/gsp323/runs.csv&lt;/code&gt; to the textbox, and click the &lt;strong&gt;Go&lt;/strong&gt; button next to it.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;824&quot; height=&quot;269&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-import-from-gcs.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;824&quot; height=&quot;269&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-import-from-gcs.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;6&quot;&gt;
  &lt;li&gt;After showing the preview of runs.csv in the right pane, click on the &lt;strong&gt;Import &amp;amp; Wrangle&lt;/strong&gt; button.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;transform-data-in-dataprep&quot;&gt;Transform data in Dataprep&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;After launching the Dataperop Transformer, scroll right to the end and select &lt;strong&gt;column10&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the Details pane, click &lt;strong&gt;FAILURE&lt;/strong&gt; under Unique Values to show context menu.&lt;/li&gt;
  &lt;li&gt;Select &lt;strong&gt;Delete rows with selected values&lt;/strong&gt; to Remove all rows with the state of â€œFAILUREâ€.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;710&quot; height=&quot;499&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-remove-rows-with-status-failure.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;710&quot; height=&quot;499&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-remove-rows-with-status-failure.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;Click the downward arrow next to &lt;strong&gt;column9&lt;/strong&gt;, choose &lt;strong&gt;Filter rows&lt;/strong&gt; &amp;gt; &lt;strong&gt;On column value&lt;/strong&gt; &amp;gt; &lt;strong&gt;Contains&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the Filter rows pane, enter the regex pattern &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/(^0$|^0\.0$)/&lt;/code&gt; to â€œPattern to matchâ€.&lt;/li&gt;
  &lt;li&gt;Select &lt;strong&gt;Delete matching rows&lt;/strong&gt; under the Action section, then click the &lt;strong&gt;Add&lt;/strong&gt; button.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;940&quot; height=&quot;476&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-filter-column9.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;940&quot; height=&quot;476&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-filter-column9.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;7&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Rename the columns to be:&lt;/p&gt;

    &lt;ol start=&quot;2&quot;&gt;
      &lt;li&gt;runid&lt;/li&gt;
      &lt;li&gt;userid&lt;/li&gt;
      &lt;li&gt;labid&lt;/li&gt;
      &lt;li&gt;lab_title&lt;/li&gt;
      &lt;li&gt;start&lt;/li&gt;
      &lt;li&gt;end&lt;/li&gt;
      &lt;li&gt;time&lt;/li&gt;
      &lt;li&gt;score&lt;/li&gt;
      &lt;li&gt;state&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;ol start=&quot;8&quot;&gt;
  &lt;li&gt;Confirm the recipe. It should like the sceenshot below.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;378&quot; height=&quot;615&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-final-recipe.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;378&quot; height=&quot;615&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-final-recipe.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;9&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Run Job&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1268&quot; height=&quot;613&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-run-job-on-dataflow.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1268&quot; height=&quot;613&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task3-dataprep-run-job-on-dataflow.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-4-ai&quot;&gt;Task 4: AI&lt;/h2&gt;

&lt;h4 id=&quot;use-google-cloud-speech-api-to-analyze-the-audio-file&quot;&gt;Use Google Cloud Speech API to analyze the audio file&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, click on &lt;strong&gt;Navigation menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;APIs &amp;amp; Services&lt;/strong&gt; &amp;gt; &lt;strong&gt;Credentials&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the Credentials page, click on &lt;strong&gt;+ CREATE CREDENTIALS&lt;/strong&gt; &amp;gt; &lt;strong&gt;API key&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Copy the API key to clipboard, then click &lt;strong&gt;RESTRICT KEY&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Open the Cloud Shell, store the API key as an environment variable by running the following command:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;API_KEY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;lt;YOUR-API-KEY&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;&lt;strong&gt;Replace&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;YOUR-API-KEY&amp;gt;&lt;/code&gt; with the copied key value.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;In the Cloud Shell, create a JSON file called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gsc-request.json&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Save the following codes to the file.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;config&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;encoding&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FLAC&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;languageCode&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;en-US&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;audio&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;uri&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;gs://cloud-training/gsp323/task4.flac&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Use the following &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl&lt;/code&gt; command to submit the request to Google Cloud Speech API and store the response to a file called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;task4-gcs.result&lt;/code&gt;.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-X&lt;/span&gt; POST &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Content-Type: application/json&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--data-binary&lt;/span&gt; @gsc-request.json &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;https://speech.googleapis.com/v1/speech:recognize?key=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;API_KEY&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; task4-gcs.result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1186&quot; height=&quot;249&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task4-ai-gcs-result.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;1186&quot; height=&quot;249&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp323-task4-ai-gcs-result.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;8&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Upload the resulted file to Cloud Storage by running:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gsutil &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;task4-gcs.result gs://&amp;lt;YOUR-PROJECT_ID&amp;gt;-marking/task4-gcs.result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;&lt;strong&gt;Replace&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;YOUR-PROJECT_ID&amp;gt;&lt;/code&gt; with your project ID.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;use-the-cloud-natural-language-api-to-analyze-the-sentence&quot;&gt;Use the Cloud Natural Language API to analyze the sentence&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;In the Cloud Shell, run the following command to use the Cloud Natural Language API to analyze the given sentence.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcloud ml language analyze-entities &lt;span class=&quot;nt&quot;&gt;--content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Old Norse texts portray Odin as one-eyed and long-bearded, frequently wielding a spear named Gungnir and wearing a cloak and a broad hat.&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; task4-cnl.result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Upload the resulted file to Cloud Storage by running:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gsutil &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;task4-cnl.result gs://&amp;lt;YOUR-PROJECT_ID&amp;gt;-marking/task4-cnl.result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;&lt;strong&gt;Replace&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;YOUR-PROJECT_ID&amp;gt;&lt;/code&gt; with your project ID.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;use-google-video-intelligence-and-detect-all-text-on-the-video&quot;&gt;Use Google Video Intelligence and detect all text on the video&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Shell, create a JSON file called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gvi-request.json&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Save the following codes to the file.&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;inputUri&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;gs://spls/gsp154/video/train.mp4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;features&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;LABEL_DETECTION&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
   &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Go back to the Cloud Console, click on &lt;strong&gt;Navigation menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;APIs &amp;amp; Services&lt;/strong&gt; &amp;gt; &lt;strong&gt;Credentials&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click the service account named with â€œQwiklabs User Service Accountâ€ to view the details.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;ADD KEY&lt;/strong&gt; &amp;gt; &lt;strong&gt;Create new key&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Choose &lt;strong&gt;JSON&lt;/strong&gt; and click &lt;strong&gt;CREATE&lt;/strong&gt; to download the Private key file to your computer.&lt;/li&gt;
  &lt;li&gt;Upload the file to the Cloud Shell environment.&lt;/li&gt;
  &lt;li&gt;Rename the uploaded file to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;key.json&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run the following commands to create a token.&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcloud auth activate-service-account --key-file key.json
export TOKEN=$(gcloud auth print-access-token)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Run the following command to use theGoogle Video Intelligence and detect all text on the video.&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Content-Type: application/json'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Authorization: Bearer '&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;gcloud auth print-access-token&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'https://videointelligence.googleapis.com/v1/videos:annotate'&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; @gvi-request.json &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; task4-gvi.result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Upload the resulted file to Cloud Storage by running:&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   gsutil &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;task4-gvi.result gs://&amp;lt;YOUR-PROJECT_ID&amp;gt;-marking/task4-gvi.result
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Replace&lt;/strong&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;YOUR-PROJECT_ID&amp;gt;&lt;/code&gt; with your project ID.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;iAGiLYAx7z8&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/iAGiLYAx7z8&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='iAGiLYAx7z8']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP323 Perform Foundational Data, ML, and AI Tasks in Google Cloud: Challenge Lab | youtu.be/iAGiLYAx7z8&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='iAGiLYAx7z8']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP323 Perform Foundational Data, ML, and AI Tasks in Google Cloud: Challenge Lab | youtu.be/iAGiLYAx7z8&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='iAGiLYAx7z8']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP323 Perform Foundational Data, ML, and AI Tasks in Google Cloud: Challenge Lab | youtu.be/iAGiLYAx7z8&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;38&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;simple&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Dataflow&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;job&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;08&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;simple&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Dataproc&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;job&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;simple&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Dataprep&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;job&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AI&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Mon, 07 Sep 2020 21:30:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Perform-Foundational-Data-ML-and-AI-Tasks-in-Google-Cloud-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Perform-Foundational-Data-ML-and-AI-Tasks-in-Google-Cloud-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        <category>BigQuery</category>
        
        <category>Data Science</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Engineer Data in Google Cloud: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP327&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/12379?parent=catalog&quot;&gt;Engineer Data in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an expert-level exercise. You will practice the skills and knowledge for build a prediction model of taxi fares using machine learning with BigQuery.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The challenge contains 6 required tasks:&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#task-1-clean-your-training-data&quot;&gt;Clean your training data&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#task-2-create-a-bqml-model-called-taxiridesfare_model&quot;&gt;Create a BQML model called taxirides.fare_model&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#task-3-perform-a-batch-prediction-on-new-data&quot;&gt;Perform a batch prediction on new data&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-1-clean-your-training-data&quot;&gt;Task 1: Clean your training data&lt;/h2&gt;

&lt;p&gt;In this task, you need to make a copy of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;historical_taxi_rides_raw&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taxi_training_data&lt;/code&gt; in the given &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taxirides&lt;/code&gt; dataset in BigQuery.&lt;/p&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;287&quot; height=&quot;157&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task1-taxirides-dataset.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;287&quot; height=&quot;157&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task1-taxirides-dataset.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Hints&lt;/strong&gt;: Refer to the lab &lt;strong&gt;GSP426&lt;/strong&gt; &lt;a href=&quot;https://www.qwiklabs.com/focuses/1797?parent=catalog&quot;&gt;Predict Taxi Fare with a BigQuery ML Forecasting Model&lt;/a&gt; on Qwiklabs&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Make sure that:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;target column is called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fare_amount&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Data Cleaning Tasks:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Keep rows for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;trip_distance&lt;/code&gt; &amp;gt; 0&lt;/li&gt;
  &lt;li&gt;Remove rows for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fare_amount&lt;/code&gt; &amp;gt; 2.5&lt;/li&gt;
  &lt;li&gt;Ensure that the latitudes and longitudes are reasonable for the use case. ??&lt;/li&gt;
  &lt;li&gt;Create a new column called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;total_amount&lt;/code&gt; from tolls_amount + fare_amount&lt;/li&gt;
  &lt;li&gt;Sample the dataset &amp;lt; 1,000,000 rows&lt;/li&gt;
  &lt;li&gt;Only copy fields that will be used in your model&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Procedures:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;BigQuery&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;More&lt;/strong&gt; &amp;gt; &lt;strong&gt;Query settings&lt;/strong&gt; under the Query Editor.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;381&quot; height=&quot;173&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task1-more-query-settings.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;381&quot; height=&quot;173&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task1-more-query-settings.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;3&quot;&gt;
  &lt;li&gt;Select &lt;strong&gt;Set a destination table for query results&lt;/strong&gt; under Destination; Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taxi_training_data&lt;/code&gt; as the Table name&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;492&quot; height=&quot;492&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task1-query-settings-details.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;492&quot; height=&quot;492&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task1-query-settings-details.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;4&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Save&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run the following SQL query&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;Select&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pickup_datetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pickup_longitude&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickuplon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pickup_latitude&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickuplat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;dropoff_longitude&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropofflon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;dropoff_latitude&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropofflat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;passenger_count&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passengers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tolls_amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fare_amount&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fare_amount&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`taxirides.historical_taxi_rides_raw`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;trip_distance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fare_amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickup_longitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;75&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickup_longitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;73&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropoff_longitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;75&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropoff_longitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;73&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickup_latitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickup_latitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropoff_latitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropoff_latitude&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;passenger_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RAND&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;999999&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1031673361&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-2-create-a-bqml-model-called-taxiridesfare_model&quot;&gt;Task 2: Create a BQML model called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taxirides.fare_model&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;In this task, you need to:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Create a model called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taxirides.fare_model&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Train the model with an RMSE &amp;lt; 10&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Hints&lt;/strong&gt;: Refer to the lab &lt;strong&gt;GSP426&lt;/strong&gt; &lt;a href=&quot;https://www.qwiklabs.com/focuses/1797?parent=catalog&quot;&gt;Predict Taxi Fare with a BigQuery ML Forecasting Model&lt;/a&gt; on Qwiklabs&lt;/em&gt;&lt;/p&gt;

&lt;h4 id=&quot;create-a-model&quot;&gt;Create a model&lt;/h4&gt;

&lt;p&gt;Compose a new query with the given &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ST_distance()&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ST_GeogPoint()&lt;/code&gt; functions in the Query Editor.&lt;/p&gt;

&lt;p&gt;Make sure that:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fare_amount&lt;/code&gt; as the label&lt;/li&gt;
  &lt;li&gt;train with the data in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taxirides.taxi_training_data&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The SQL query to create the BQML model can be coded to be:&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;REPLACE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MODEL&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;taxirides&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fare_model&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OPTIONS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model_type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'linear_reg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fare_amount'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;taxitrips&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ST_Distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ST_GeogPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pickuplon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickuplat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ST_GeogPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dropofflon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropofflat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;euclidean&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;`taxirides.taxi_training_data`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;taxitrips&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Click &lt;strong&gt;Run&lt;/strong&gt; and the machine learning process will take about 2 minutes.&lt;/p&gt;

&lt;h4 id=&quot;evaluate-model-performance&quot;&gt;Evaluate model performance&lt;/h4&gt;

&lt;p&gt;After the training completed, you can evaluate the &lt;strong&gt;Root Mean Square Error&lt;/strong&gt; (&lt;strong&gt;RMSE&lt;/strong&gt;) of the prediction model using the following query.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;standardSQL&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;SQRT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mean_squared_error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rmse&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;ML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EVALUATE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;taxirides&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fare_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;taxitrips&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ST_Distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ST_GeogPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pickuplon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickuplat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ST_GeogPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dropofflon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropofflat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;euclidean&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;`taxirides.taxi_training_data`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;taxitrips&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Results&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;340&quot; height=&quot;152&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task2-eval-rmse-without-euclidean.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;340&quot; height=&quot;152&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task2-eval-rmse-without-euclidean.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;RMSE of a modeal trained without euclidean&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;339&quot; height=&quot;131&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task2-eval-rmse-with-euclidean.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;339&quot; height=&quot;131&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task2-eval-rmse-with-euclidean.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
        &lt;figcaption&gt;RMSE of a modeal trained with euclidean&lt;/figcaption&gt;
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-3-perform-a-batch-prediction-on-new-data&quot;&gt;Task 3: Perform a batch prediction on new data&lt;/h2&gt;

&lt;p&gt;In this task, you need to use the BQML model to predict the taxi fares of the data given in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;taxirides.report_prediction_data&lt;/code&gt; table.&lt;/p&gt;

&lt;p&gt;Make sure that:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;store your results in a table called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2015_fare_amount_predictions&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Procedures:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Select &lt;strong&gt;Set a destination table for query results&lt;/strong&gt; under Destination; Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2015_fare_amount_predictions&lt;/code&gt; as the Table name&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;460&quot; height=&quot;472&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task3-query-settings-details.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;460&quot; height=&quot;472&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task3-query-settings-details.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;2&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;Save&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run the following SQL query.&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;standardSQL&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;ML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PREDICT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MODEL&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`taxirides.fare_model`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;taxitrips&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ST_Distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ST_GeogPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pickuplon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pickuplat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ST_GeogPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dropofflon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dropofflat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;euclidean&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;`taxirides.report_prediction_data`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;taxitrips&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;At the end of the lab, your BigQuery dataset should contains the following tables.&lt;/p&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;262&quot; height=&quot;217&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task3-resulted-tables.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;262&quot; height=&quot;217&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp327-task3-resulted-tables.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;myYCfRS15fM&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/myYCfRS15fM&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='myYCfRS15fM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP327 Engineer Data in Google Cloud: Challenge Lab | youtu.be/myYCfRS15fM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='myYCfRS15fM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP327 Engineer Data in Google Cloud: Challenge Lab | youtu.be/myYCfRS15fM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='myYCfRS15fM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP327 Engineer Data in Google Cloud: Challenge Lab | youtu.be/myYCfRS15fM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Clean&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;training&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;BQML&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;called&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`taxirides.fare_model`&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Bouns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Improve&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;performance&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;training&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ST_distance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ST_GeogPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;functions&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;06&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Perform&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;batch&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;prediction&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Keep on reading&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Insights-from-Data-with-BigQuery-Challenge-Lab&quot;&gt;QLogbook: Insights from Data with BigQuery: Challenge Lab (COVID-19 Open Data)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Explore-Machine-Learning-Models-with-Explainable-AI-Challenge-Lab&quot;&gt;QLogbook: Explore Machine Learning Models with Explainable AI: Challenge Lab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Wed, 26 Aug 2020 07:30:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Engineer-Data-in-Google-Cloud-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Engineer-Data-in-Google-Cloud-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        <category>BigQuery</category>
        
        <category>Data Science</category>
        
        <category>Machine Learning</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Insights from Data with BigQuery: Challenge Lab (COVID-19 Open Data)</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP322&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/11988?parent=catalog&quot;&gt;Insights from Data with BigQuery: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an expert-level exercise. You will practice BigQuery for the data analysis of the COVID-19 open dataset &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bigquery-public-data.covid19_open_data.covid19_open_data&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;open-public-dataset&quot;&gt;Open Public Dataset&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;BigQuery&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;+ ADD DATA&lt;/strong&gt; &amp;gt; &lt;strong&gt;Explore public datasets&lt;/strong&gt; from the left pane.&lt;/li&gt;
  &lt;li&gt;Search &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;covid19_open_data&lt;/code&gt; and then select &lt;strong&gt;COVID-19 Open Data&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Use Filter to locate the table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;covid19_open_data&lt;/code&gt; under the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;covid19_open_data&lt;/code&gt; dataset.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;993&quot; height=&quot;559&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-covid-19-open-data.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;993&quot; height=&quot;559&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-covid-19-open-data.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;982&quot; height=&quot;618&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-tables.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;982&quot; height=&quot;618&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-tables.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;query-1-total-confirmed-cases&quot;&gt;Query 1: Total Confirmed Cases&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1349&quot; height=&quot;531&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-01.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1349&quot; height=&quot;531&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-01.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_cases_worldwide&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;2020-04-15&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This query sums up the cumulative confirmed cases of all records on 15 April, 2020.&lt;/p&gt;

&lt;h2 id=&quot;query-2-worst-affected-areas&quot;&gt;Query 2: Worst Affected Areas&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1330&quot; height=&quot;513&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-02.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1330&quot; height=&quot;513&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-02.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count_of_states&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_deceased&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;death_count&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;United States of America&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'2020-04-10'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;IS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;death_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Make sure that you use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;country_name&lt;/code&gt; to filter the US reconds instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;country_code&lt;/code&gt;, and use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subregion1_name&lt;/code&gt; to group the states in the US.&lt;/p&gt;

&lt;h2 id=&quot;query-3-identifying-hotspots&quot;&gt;Query 3: Identifying Hotspots&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1365&quot; height=&quot;843&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-03.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1365&quot; height=&quot;843&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-03.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div style=&quot;margin-bottom:0&quot; class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; 
  &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_confirmed_cases&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;country_code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;US&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'2020-04-10'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;total_confirmed_cases&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;total_confirmed_cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p style=&quot;margin-top:-20px;padding:0px 5px;font-size:small&quot;&gt;ðŸ’¬ Thanks &lt;a href=&quot;https://chriskyfung.gitlab.io/disqus-amp/q.html?url=https://chriskyfung.github.io/blog/qwiklabs/Insights-from-Data-with-BigQuery-Challenge-Lab&amp;amp;title=%27Qlog:%20Insights%20from%20Data%20with%20BigQuery:%20Challenge%20Lab%20(COVID-19%20Open%20Data)%27#comment-5100690845&quot;&gt;Random32543654e474362&lt;/a&gt; for providing the update of Query 3.&lt;/p&gt;

&lt;amp-accordion disable-session-states=&quot;&quot; animate=&quot;&quot;&gt;
  &lt;section&gt;
    &lt;header&gt;&lt;span class=&quot;show-more&quot;&gt;&amp;nbsp;&lt;i class=&quot;fas fa-caret-down&quot;&gt;&lt;/i&gt; Show previous solution&lt;/span&gt; &lt;span class=&quot;show-less&quot;&gt;&amp;nbsp;&lt;i class=&quot;fas fa-caret-up&quot;&gt;&lt;/i&gt; Hide previous solution&lt;/span&gt;&lt;/header&gt;
    &lt;div style=&quot;background-color:#efefef;padding:10px&quot;&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_confirmed_cases&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;United States of America&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;2020-04-10&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subregion1_name&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;HAVING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_confirmed_cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_confirmed_cases&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

Due to Qwiklabs' poor design, you have to format &lt;b&gt;GROUP BY&lt;/b&gt;, &lt;b&gt;HAVING&lt;/b&gt; and &lt;b&gt;ORDER BY&lt;/b&gt; to single-line statements, respectively.
&lt;/div&gt;
  &lt;/section&gt;
&lt;/amp-accordion&gt;

&lt;h2 id=&quot;query-4-fatality-ratio&quot;&gt;Query 4: Fatality Ratio&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1341&quot; height=&quot;546&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-04.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1341&quot; height=&quot;546&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-04.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_confirmed_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_deceased&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_deaths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_deceased&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;case_fatality_ratio&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;Italy&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;2020-04-01&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;2020-04-30&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Originally, it should be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;date='2020-04-30'&lt;/code&gt;. I donâ€™t know why Qwiklabs replaced it with a date range.&lt;/p&gt;

&lt;h2 id=&quot;query-5-identifying-specific-day&quot;&gt;Query 5: Identifying specific day&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1449&quot; height=&quot;550&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-05.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1449&quot; height=&quot;550&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-05.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Italy'&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cumulative_deceased&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Make sure that you use &lt;strong&gt;ORDER BY&lt;/strong&gt; to sort the results by date.&lt;/p&gt;

&lt;h2 id=&quot;query-6-finding-days-with-zero-net-new-cases&quot;&gt;Query 6: Finding days with zero net new cases&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1366&quot; height=&quot;767&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-06.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1366&quot; height=&quot;767&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-06.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;india_cases_by_date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;India&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;between&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-02-21'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-03-15'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ASC&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;india_previous_day_comparison&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LAG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;previous_day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LAG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;net_new_cases&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;india_cases_by_date&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;COUNT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;india_previous_day_comparison&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;net_new_cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;query-7-doubling-rate&quot;&gt;Query 7: Doubling rate&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1333&quot; height=&quot;855&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-07.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1333&quot; height=&quot;855&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-07.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;us_cases_by_date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;United States of America&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;between&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-03-22'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-04-20'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ASC&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;us_previous_day_comparison&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LAG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;previous_day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LAG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;net_new_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LAG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LAG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;percentage_increase&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;us_cases_by_date&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Confirmed_Cases_On_Day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;previous_day&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Confirmed_Cases_Previous_Day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;percentage_increase&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Percentage_Increase_In_Cases&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;us_previous_day_comparison&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;percentage_increase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;query-8-recovery-rate&quot;&gt;Query 8: Recovery rate&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1292&quot; height=&quot;866&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-08.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1292&quot; height=&quot;866&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-08.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cases_by_country&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;country&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_recovered&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recovered_cases&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;2020-05-10&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recovered_rate&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;country&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recovered_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recovered_cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recovery_rate&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cases_by_country&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;country&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;confirmed_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recovered_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recovery_rate&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;recovered_rate&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;cases&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50000&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;recovery_rate&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;query-9-cdgr---cumulative-daily-growth-rate&quot;&gt;Query 9: CDGR - Cumulative Daily Growth Rate&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1325&quot; height=&quot;777&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-09.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;1325&quot; height=&quot;777&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-09.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;france_cases&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total_cases&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;France&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;IN&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'2020-01-24'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'2020-05-10'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;total_cases&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first_day_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LEAD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;total_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_day_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;DATE_DIFF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LEAD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;days_diff&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;france_cases&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first_day_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_day_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;days_diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;POWER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_day_cases&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first_day_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;days_diff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cdgr&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;summary&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;create-a-datastudio-report&quot;&gt;Create a Datastudio report&lt;/h2&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;858&quot; height=&quot;257&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-10.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;BigQuery Results&quot; width=&quot;858&quot; height=&quot;257&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp787-10.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Copy the following code to the Query editor and then click &lt;strong&gt;Run&lt;/strong&gt;.&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_confirmed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;country_cases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cumulative_deceased&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;country_deaths&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`bigquery-public-data.covid19_open_data.covid19_open_data`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-03-15'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-04-30'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;country_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'United States of America'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;EXPLORE DATA&lt;/strong&gt; &amp;gt; &lt;strong&gt;Explore with Data Studio&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Authorize Data Studio to access BigQuery.&lt;/li&gt;
  &lt;li&gt;You may fail to create a report for the first-time logon of Data Studio. Click &lt;strong&gt;+ Blank Report&lt;/strong&gt; and accept the Terms of Service. Go back to the BigQuery page and click &lt;strong&gt;Explore with Data Studio&lt;/strong&gt; again.&lt;/li&gt;
  &lt;li&gt;In the new Data Studio report, select &lt;strong&gt;Add a chart&lt;/strong&gt; &amp;gt; &lt;strong&gt;Time series Chart&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;country_cases&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;country_deaths&lt;/code&gt; to the Metric field.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Save&lt;/strong&gt; to commit the change.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;If you fail to get the score of this task, remove all data and reports from the Datastudio console before retry.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;3zxclCMoQeM&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/3zxclCMoQeM&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='3zxclCMoQeM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP787 Insights from Data with BigQuery: Challenge Lab (COVID-19 Open Data) | youtu.be/3zxclCMoQeM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='3zxclCMoQeM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP787 Insights from Data with BigQuery: Challenge Lab (COVID-19 Open Data) | youtu.be/3zxclCMoQeM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='3zxclCMoQeM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP787 Insights from Data with BigQuery: Challenge Lab (COVID-19 Open Data) | youtu.be/3zxclCMoQeM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Open&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;COVID-19 Open data&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dataset&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Total&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Confirmed&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cases&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Worst&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Affected&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Areas&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;07&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;07&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Identifying&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Hotspots&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;09&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Fatality&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Ratio&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Identifying&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;specific&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;day&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Finding&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;days&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;zero&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;net&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cases&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;47&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Doubling&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rate&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Recovery&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rate&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;36&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Query&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CDGR&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cumulative&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Daily&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Growth&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Rate&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Datastudio&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;report&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;References&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://cloudonair.withgoogle.com/events/next20-studyjam/watch?talk=w5-talk-3&quot;&gt;Watch - Hands-on Lab: Insights into Data with BigQuery - Challenge Lab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Keep on reading&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Engineer-Data-in-Google-Cloud-Challenge-Lab&quot;&gt;QLogbook: Engineer Data in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sat, 15 Aug 2020 22:48:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Insights-from-Data-with-BigQuery-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Insights-from-Data-with-BigQuery-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        <category>BigQuery</category>
        
        <category>Data Science</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Build and Secure Networks in Google Cloud: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP322&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/12068?parent=catalog&quot;&gt;Build and Secure Networks in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an expert-level exercise. You will need to set up firewall rules to configure a simple environment securely that only allow SSH to the bastion via IAP.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The challenge contains 6 required tasks:&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Remove the overly permissive rules&lt;/li&gt;
  &lt;li&gt;Start the bastion host instance&lt;/li&gt;
  &lt;li&gt;Create a firewall rule that allows SSH (tcp/22) from the IAP service and add network tag on bastion&lt;/li&gt;
  &lt;li&gt;Create a firewall rule that allows traffic on HTTP (tcp/80) to any address and add network tag on juice-shop&lt;/li&gt;
  &lt;li&gt;Create a firewall rule that allows traffic on SSH (tcp/22) from acme-mgmt-subnet network address and add network tag on juice-shop&lt;/li&gt;
  &lt;li&gt;SSH to bastion host via IAP and juice-shop via bastion&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;1-remove-the-overly-permissive-rules&quot;&gt;1. Remove the overly permissive rules&lt;/h2&gt;

&lt;p&gt;This task is very simple. You only need to the open-access firewall rules.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;VPC Network&lt;/strong&gt; &amp;gt; &lt;strong&gt;Firewall&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Check the box next to the rule named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open-access&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;DELETE&lt;/strong&gt; to remove it.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Remove open-access firewall rules on Google Cloud Platform&quot; width=&quot;1024&quot; height=&quot;576&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-task1-delete-open-access.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Remove open-access firewall rules on Google Cloud Platform&quot; width=&quot;1024&quot; height=&quot;576&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-task1-delete-open-access.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;2-start-the-bastion-host-instance&quot;&gt;2. Start the bastion host instance&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;Menu&lt;/strong&gt; &amp;gt; &lt;strong&gt;Compute Engine&lt;/strong&gt; &amp;gt; &lt;strong&gt;VM instances&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Check the box next to the instance named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bastion&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;Start&lt;/strong&gt; to run the instance.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;3-create-a-firewall-rule-that-allows-ssh-tcp22-from-the-iap-service-and-add-network-tag-on-bastion&quot;&gt;3. Create a firewall rule that allows SSH (tcp/22) from the IAP service and add network tag on bastion&lt;/h2&gt;

&lt;h3 id=&quot;add-network-tag-on-bastion&quot;&gt;Add network tag on bastion&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;On the VM instances page, click on the name of the &lt;strong&gt;bastion&lt;/strong&gt; instance.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;EDIT&lt;/strong&gt; on the details page.&lt;/li&gt;
  &lt;li&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bastion&lt;/code&gt; to the &lt;strong&gt;Network tags&lt;/strong&gt; field.&lt;/li&gt;
  &lt;li&gt;Scroll to the button of the page and click &lt;strong&gt;Save&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;create-firewall-rule-to-allow-ssh-form-the-iap-service&quot;&gt;Create firewall rule to allow SSH form the IAP service&lt;/h3&gt;

&lt;p&gt;Read &lt;a href=&quot;https://cloud.google.com/iap/docs/using-tcp-forwarding#create-firewall-rule&quot;&gt;&lt;strong&gt;Using IAP for TCP forwarding&lt;/strong&gt;&lt;/a&gt; in the Google Cloud Documentation before you create the firewall rule.&lt;/p&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;create a firewall rule to allow IAP to connect to your VM instances in Google Cloud Console&quot; width=&quot;916&quot; height=&quot;469&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-iap-ip.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;create a firewall rule to allow IAP to connect to your VM instances in Google Cloud Console&quot; width=&quot;916&quot; height=&quot;469&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-iap-ip.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;Go back to the Firewall Rules page, and click &lt;strong&gt;Create firewall rule&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configure the following settings:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name&lt;/td&gt;
          &lt;td&gt;e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allow-ssh-from-iap&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Direction of traffic&lt;/td&gt;
          &lt;td&gt;Ingress&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Targets&lt;/td&gt;
          &lt;td&gt;Specified target tags&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Target tags&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bastion&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Source IP ranges&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;35.235.240.0/20&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Protocols and ports&lt;/td&gt;
          &lt;td&gt;Select &lt;strong&gt;TCP&lt;/strong&gt; and enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;22&lt;/code&gt; to allow SSH&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Firewall rule settings for the secure remote ssh access via IAP-enabled bastion&quot; width=&quot;552&quot; height=&quot;887&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-iap-firewall-rule-settings.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Firewall rule settings for the secure remote ssh access via IAP-enabled bastion&quot; width=&quot;552&quot; height=&quot;887&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-iap-firewall-rule-settings.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;4-create-a-firewall-rule-that-allows-traffic-on-http-tcp80-to-any-address-and-add-network-tag-on-juice-shop&quot;&gt;4. Create a firewall rule that allows traffic on HTTP (tcp/80) to any address and add network tag on juice-shop&lt;/h2&gt;

&lt;h3 id=&quot;create-firewall-rule-to-allow-http-traffic-to-juice-shop&quot;&gt;Create firewall rule to allow HTTP traffic to juice-shop&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;On the Firewall Rules page, and click &lt;strong&gt;Create firewall rule&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configure the following settings:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name&lt;/td&gt;
          &lt;td&gt;e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allow-http-ingress&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Direction of traffic&lt;/td&gt;
          &lt;td&gt;Ingress&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Targets&lt;/td&gt;
          &lt;td&gt;Specified target tags&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Target tags&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;juice-shop&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Source IP ranges&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.0.0.0/0&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Protocols and ports&lt;/td&gt;
          &lt;td&gt;Select &lt;strong&gt;TCP&lt;/strong&gt; and enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;80&lt;/code&gt; to allow HTTP&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Firewall rule settings for the juice-shop VM instance&quot; width=&quot;548&quot; height=&quot;902&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-firewall-rule-settings-for-juice-shop.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Firewall rule settings for the juice-shop VM instance&quot; width=&quot;548&quot; height=&quot;902&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-firewall-rule-settings-for-juice-shop.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h3 id=&quot;add-network-tag-on-juice-shop&quot;&gt;Add network tag on juice-shop&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;On the VM instances page, click on the name of the &lt;strong&gt;juice-shop&lt;/strong&gt; instance.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;EDIT&lt;/strong&gt; on the details page.&lt;/li&gt;
  &lt;li&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;juice-shop&lt;/code&gt; to the &lt;strong&gt;Network tags&lt;/strong&gt; field.&lt;/li&gt;
  &lt;li&gt;Scroll to the button of the page and click &lt;strong&gt;Save&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;5-create-a-firewall-rule-that-allows-traffic-on-ssh-tcp22-from-acme-mgmt-subnet-network-address-and-add-network-tag-on-juice-shop&quot;&gt;5. Create a firewall rule that allows traffic on SSH (tcp/22) from acme-mgmt-subnet network address and add network tag on juice-shop&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;VPC network&lt;/strong&gt; &amp;gt; &lt;strong&gt;VPC networks&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Copy the IP address range of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;acme-mgmt-subnet&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Go back to the Firewall Rules page, and click &lt;strong&gt;Create firewall rule&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configure the following settings:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name&lt;/td&gt;
          &lt;td&gt;e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allow-ssh-from-mgmt-subnet&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Direction of traffic&lt;/td&gt;
          &lt;td&gt;Ingress&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Targets&lt;/td&gt;
          &lt;td&gt;Specified target tags&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Target tags&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bastion&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;juice-shop&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Source IP ranges&lt;/td&gt;
          &lt;td&gt;&lt;em&gt;IP address range of your aceme-mgmt-subnet&lt;/em&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Protocols and ports&lt;/td&gt;
          &lt;td&gt;Select &lt;strong&gt;TCP&lt;/strong&gt; and enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;22&lt;/code&gt; to allow SSH&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Firewall rule settings for the SSH traffic from acme-mgmt-subnet&quot; width=&quot;562&quot; height=&quot;887&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-firewall-rule-settings-for-ssh-from-acme-mgmt-subnet.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Firewall rule settings for the SSH traffic from acme-mgmt-subnet&quot; width=&quot;562&quot; height=&quot;887&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp322-firewall-rule-settings-for-ssh-from-acme-mgmt-subnet.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;6-ssh-to-bastion-host-via-iap-and-juice-shop-via-bastion&quot;&gt;6. SSH to bastion host via IAP and juice-shop via bastion&lt;/h2&gt;

&lt;p&gt;After configuring the firewall rules, try to verify the environment via the bastion.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;Compute Engine&lt;/strong&gt; &amp;gt; &lt;strong&gt;VM instances&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Copy the Internal IP of the &lt;strong&gt;juice-shop&lt;/strong&gt; instance.&lt;/li&gt;
  &lt;li&gt;Click on the SSH button in the row of the &lt;strong&gt;bastion&lt;/strong&gt; instance.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;In the SSH console, access the juice-shop from the bastion using the following command:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh &amp;lt;internal-IP-of-juice-shop&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;(Remember to REPLACE &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;internal-IP-of-juice-shop&amp;gt;&lt;/code&gt; with the copied IP address)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;NToEHzJTpgs&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/NToEHzJTpgs&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='NToEHzJTpgs']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP322 Build and Secure Networks in Google Cloud: Challenge Lab | youtu.be/NToEHzJTpgs&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='NToEHzJTpgs']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP322 Build and Secure Networks in Google Cloud: Challenge Lab | youtu.be/NToEHzJTpgs&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='NToEHzJTpgs']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP322 Build and Secure Networks in Google Cloud: Challenge Lab | youtu.be/NToEHzJTpgs&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Provisioning&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Remove&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;overly&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;permissive&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rules&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bastion&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;instance&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;37&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;firewall&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rule&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;that&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;allows&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SSH&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;IAP&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;service&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;network&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bastion&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;firewall&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rule&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;that&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;allows&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;traffic&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HTTP&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;any&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;network&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;juice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;shop&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;firewall&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rule&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;that&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;allows&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;traffic&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SSH&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;acme&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mgmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subnet&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SSH&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bastion&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;via&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;IAP&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;juice&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;shop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;via&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bastion&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Keep on reading&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Configure-a-Firewall-and-a-Startup-Script-with-Deployment-Manager&quot;&gt;Qwiklabs/Logbook: Configure a Firewall and a Startup Script with Deployment Manager&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Set-up-and-Configure-a-Cloud-Environment-in-Google-Cloud-Challenge-Lab&quot;&gt;Qwiklabs/Logbook: Set up and Configure a Cloud Environment in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Configure-Windows-Bastion-Host-with-Terraform-on-GCP&quot;&gt;Qwiklabs/Logbook: Configure Secure RDP using a Windows Bastion Host with Terraform on GCP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sat, 15 Aug 2020 04:00:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Build-and-Secure-Networks-in-Google-Cloud-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Build-and-Secure-Networks-in-Google-Cloud-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        <category>Secure VPC</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Set up and Configure a Cloud Environment in Google Cloud: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP321&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/10603?parent=catalog&quot;&gt;Set up and Configure a Cloud Environment in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an expert-level exercise. You will practice the skills and knowledge for deploy VPCs for development and production, a Kubernetes cluster and a Cloud SQL instance for a WordPress site.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The challenge contains 9 required tasks:&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Create development VPC manually&lt;/li&gt;
  &lt;li&gt;Create production VPC using Deployment Manager&lt;/li&gt;
  &lt;li&gt;Create bastion host&lt;/li&gt;
  &lt;li&gt;Create and configure Cloud SQL Instance&lt;/li&gt;
  &lt;li&gt;Create Kubernetes cluster&lt;/li&gt;
  &lt;li&gt;Prepare the Kubernetes cluster&lt;/li&gt;
  &lt;li&gt;Create a WordPress deployment&lt;/li&gt;
  &lt;li&gt;Enable monitoring&lt;/li&gt;
  &lt;li&gt;Provide access for an additional engineer&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-1-create-development-vpc-manually&quot;&gt;Task 1: Create development VPC manually&lt;/h2&gt;

&lt;p&gt;Make sure you create all resources in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1&lt;/code&gt; region and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1-b&lt;/code&gt; zone.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;In the Google Cloud Console, navigate to &lt;strong&gt;VPC network&lt;/strong&gt; &amp;gt; &lt;strong&gt;VPC networks&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;Create VPC network&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-vpc&lt;/code&gt; to the &lt;strong&gt;Name&lt;/strong&gt; field.&lt;/li&gt;
  &lt;li&gt;Select &lt;strong&gt;Custom&lt;/strong&gt; for the Subnet creation mode.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-wp&lt;/code&gt; subnet with the following parameters:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-wp&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Region:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;IP address range:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.16.0/20&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click &lt;strong&gt;+ Add subnet&lt;/strong&gt; and add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-mgmt&lt;/code&gt; subnet with the following parameters&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-mgmt&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Region:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;IP address range:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.32.0/20&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-2-create-production-vpc-using-deployment-manager&quot;&gt;Task 2: Create production VPC using Deployment Manager&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Copy the Deployment Manager configuration files to Cloud Shell using the following command:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gsutil &lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; gs://cloud-training/gsp321/dm ~/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Edit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prod-network.yaml&lt;/code&gt; configuration file&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;dm
edit prod-netork.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SET_REGION&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1&lt;/code&gt; in the editor, and then save the change.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Go back to the Cloud Shell, use the following command to create the production VPC network with the configuration files:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcloud deployment-manager deployments create griffin-prod &lt;span class=&quot;nt&quot;&gt;--config&lt;/span&gt; prod-netork.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Go back to the Cloud Console, navigate to &lt;strong&gt;Deployment Manager&lt;/strong&gt; to confirm the deployment.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Create griffin-dev-vpc network using Deployment Manager&quot; width=&quot;1069&quot; height=&quot;472&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-prod-vpc-by-deployment-manager.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Create griffin-dev-vpc network using Deployment Manager&quot; width=&quot;1069&quot; height=&quot;472&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-prod-vpc-by-deployment-manager.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-3-create-bastion-host&quot;&gt;Task 3: Create bastion host&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;Compute Engine&lt;/strong&gt; &amp;gt; &lt;strong&gt;VM instances&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Use the following parameters to create the bastion host:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-db&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Region:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;Expand the &lt;strong&gt;Management, security, disks, networking, sole tenancy&lt;/strong&gt; section.&lt;/li&gt;
  &lt;li&gt;In the &lt;strong&gt;Networking&lt;/strong&gt; tab, add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bastion&lt;/code&gt; to the Network tags.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click &lt;strong&gt;Add network interface&lt;/strong&gt;, make sure that you set up two Network interfaces,&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-mgmt&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-prod-mgmt&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;VPC network&lt;/strong&gt; &amp;gt; &lt;strong&gt;Firewall&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE FIREWALL RULE&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configure the rule with the following parameters:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allow-bastion-dev-ssh&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Network:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-vpc&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Targets:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bastion&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Source IP ranges:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.32.0/20&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Protocols and ports:&lt;/td&gt;
          &lt;td&gt;tcp: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;22&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE FIREWALL RULE&lt;/strong&gt; again.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configure another rule with the following parameters:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;allow-bastion-prod-ssh&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Network:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-prod-vpc&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Targets:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bastion&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Source IP ranges:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;192.168.48.0/20&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Protocols and ports:&lt;/td&gt;
          &lt;td&gt;tcp: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;22&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-4-create-and-configure-cloud-sql-instance&quot;&gt;Task 4: Create and configure Cloud SQL Instance&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;SQL&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE INSTANCE&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Choose MySQL&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Use the following parameters to create the instance:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Name:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-db&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Region:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Zone:&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1-b&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Root password:&lt;/td&gt;
          &lt;td&gt;e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;12345678&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: In real practice, you must set a strong password.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-db&lt;/code&gt; in the SQL pane after it has created.&lt;/li&gt;
  &lt;li&gt;Under &lt;strong&gt;Connect to this instance&lt;/strong&gt;, click on &lt;strong&gt;Connect using Cloud Shell&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Go back to the Cloud Shell, run:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcloud sql connect griffin-dev-db &lt;span class=&quot;nt&quot;&gt;--user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;root &lt;span class=&quot;nt&quot;&gt;--quiet&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Enter the &lt;strong&gt;Root password&lt;/strong&gt; generated in Step 4.&lt;/li&gt;
  &lt;li&gt;In the SQL console, run the following query to create the wordpress database:&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DATABASE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wordpress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ALL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRIVILEGES&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wordpress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;wp_user&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;%&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;stormwind_rules&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;FLUSH&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRIVILEGES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exit&lt;/code&gt; to quit the SQL shell.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-5-create-kubernetes-cluster&quot;&gt;Task 5: Create Kubernetes cluster&lt;/h2&gt;

&lt;p&gt;Create a 2 node cluster (n1-standard-4) called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev&lt;/code&gt;, in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-wp&lt;/code&gt; subnet, and in the zone &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1-b&lt;/code&gt;.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;Kubernetes Engine&lt;/strong&gt; &amp;gt; &lt;strong&gt;Clusters&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create cluster&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;In the Cluster basics tab, configure:&lt;/p&gt;

    &lt;p&gt;Name: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev&lt;/code&gt;&lt;br /&gt;
Zone: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-east1-b&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;In the left pane, click &lt;strong&gt;default-pool&lt;/strong&gt; under &lt;strong&gt;NODE POOLS&lt;/strong&gt; and set&lt;/p&gt;

    &lt;p&gt;Number of nodes: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click &lt;strong&gt;Nodes&lt;/strong&gt; Under &lt;strong&gt;default-pool&lt;/strong&gt;, and set&lt;/p&gt;

    &lt;p&gt;Machine type: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n1-standard-4&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Go to the &lt;strong&gt;Network&lt;/strong&gt; tab, set&lt;/p&gt;

    &lt;p&gt;Network: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-vpc&lt;/code&gt;&lt;br /&gt;
Node subnet: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-wp&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Networking settings for new Kubernetes cluster griffin-dev&quot; width=&quot;913&quot; height=&quot;947&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-k8s-vpc-networking.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;Networking settings for new Kubernetes cluster griffin-dev&quot; width=&quot;913&quot; height=&quot;947&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-k8s-vpc-networking.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;8&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-6-prepare-the-kubernetes-cluster&quot;&gt;Task 6: Prepare the Kubernetes cluster&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;In the Cloud Shell, use the following command to copy the files for the Kubernetes:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gsutil &lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; gs://cloud-training/gsp321/wp-k8s ~/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wp-k8s/wp-env.yaml&lt;/code&gt; with the Cloud Shell Editor.&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/wp-k8s
edit wp-env.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;username_goes_here&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;password_goes_here&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wp_user&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stormwind_rules&lt;/code&gt;, respectively.&lt;/li&gt;
  &lt;li&gt;Save the file change.&lt;/li&gt;
  &lt;li&gt;After the Kubernetes cluster has created, click on the &lt;strong&gt;Connect&lt;/strong&gt; button.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run the following command to connect the cluster:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcloud container clusters get-credentials griffin-dev &lt;span class=&quot;nt&quot;&gt;--zone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;us-east1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Deploy the configuration to the cluster using:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl apply &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; wp-env.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Use the command below to create the key, and then add the key to the Kubernetes environment:&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash ml-li highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   gcloud iam service-accounts keys create key.json &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
       &lt;span class=&quot;nt&quot;&gt;--iam-account&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;cloud-sql-proxy@&lt;span class=&quot;nv&quot;&gt;$GOOGLE_CLOUD_PROJECT&lt;/span&gt;.iam.gserviceaccount.com
   kubectl create secret generic cloudsql-instance-credentials &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
       &lt;span class=&quot;nt&quot;&gt;--from-file&lt;/span&gt; key.json
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;task-7-create-a-wordpress-deployment&quot;&gt;Task 7: Create a WordPress deployment&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wp-k8s/wp-deployment.yaml&lt;/code&gt; with the Cloud Shell Editor&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/wp-k8s
edit wp-deployment.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YOUR_SQL_INSTANCE&lt;/code&gt; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;griffin-dev-db&lt;/code&gt;â€™s Instance connection name.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;673&quot; height=&quot;155&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-sql-conf-yaml.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;673&quot; height=&quot;155&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-sql-conf-yaml.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol&gt;
  &lt;li&gt;Save the file change.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Go back to the Cloud Shell, run the following commands:&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kubectl create &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; wp-deployment.yaml
kubectl create &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; wp-service.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Copy the External endpoints of the deployed &lt;strong&gt;wordpress&lt;/strong&gt; service and open it in your browser.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;WordPress Installation&quot; width=&quot;1024&quot; height=&quot;768&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-dev-wordpress.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;WordPress Installation&quot; width=&quot;1024&quot; height=&quot;768&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-dev-wordpress.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-8-enable-monitoring&quot;&gt;Task 8: Enable monitoring&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Go back to the Cloud Console, and navigate to &lt;strong&gt;Monitoring&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the Monitoring console, click &lt;strong&gt;Uptime checks&lt;/strong&gt; in the left pane.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE UPTIME CHECK&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Configure using the following parameters:&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Field&lt;/th&gt;
          &lt;th&gt;Value&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Title&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WordPress Uptime&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Check Type&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HTTP&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Resource Type&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;URL&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Hostname&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YOUR-WORDPRESS_ENDPOINT&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Path&lt;/td&gt;
          &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;ml-li text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;new GCP uptime checks monitoring&quot; width=&quot;567&quot; height=&quot;534&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-uptime-check.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;new GCP uptime checks monitoring&quot; width=&quot;567&quot; height=&quot;534&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp321-uptime-check.jpg&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;Click &lt;strong&gt;TEST&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;SAVE&lt;/strong&gt; if there is no error.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-9-provide-access-for-an-additional-engineer&quot;&gt;Task 9: Provide access for an additional engineer&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;IAM &amp;amp; Admin&lt;/strong&gt; &amp;gt; &lt;strong&gt;IAM&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;+ADD&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the Add members to â€¦ pane, copy and paste the &lt;strong&gt;second user account&lt;/strong&gt; for the lab to the &lt;strong&gt;New members&lt;/strong&gt; field.&lt;/li&gt;
  &lt;li&gt;In the Role dropdown, select &lt;strong&gt;Project&lt;/strong&gt; &amp;gt; &lt;strong&gt;Editor&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;SAVE&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;p3jUogiOQqk&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/p3jUogiOQqk&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='p3jUogiOQqk']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP321 Set up and Configure a Cloud Environment in Google Cloud: Challenge Lab (Revised Ed.) | youtu.be/p3jUogiOQqk&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='p3jUogiOQqk']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP321 Set up and Configure a Cloud Environment in Google Cloud: Challenge Lab (Revised Ed.) | youtu.be/p3jUogiOQqk&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='p3jUogiOQqk']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP321 Set up and Configure a Cloud Environment in Google Cloud: Challenge Lab (Revised Ed.) | youtu.be/p3jUogiOQqk&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;provisioning&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;06&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;development&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;VPC&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;manually&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;02&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;production&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;VPC&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Deployment&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Manager&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;07&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bastion&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;08&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;43&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;firewall&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rule&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;enable&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SSH&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;connection&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bastion&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;33&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MySQL&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SQL&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Instance&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Kubernetes&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cluster&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;04&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;worpdress&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;database&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;03&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Prepare&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Kubernetes&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cluster&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WordPress&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;deployment&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uptime&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;check&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;WordPress&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;development&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;04&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Provide&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;access&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;an&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;additional&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;engineer&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Keep on reading&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Build-and-Secure-Networks-in-Google-Cloud-Challenge-Lab&quot;&gt;Qwiklabs/Logbook: Build and Secure Networks in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Deploy-to-Kubernetes-in-Google-Cloud-Challenge-Lab&quot;&gt;Qwiklab/Logbook: Deploy to Kubernetes in Google Cloud: Challenge Lab&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Build-a-Website-on-Google-Cloud-Challenge-Lab&quot;&gt;Qwiklab/Logbook: Build a Website on Google Cloud: Challenge Lab&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Migrate-a-MySQL-Database-to-Google-Cloud-SQL&quot;&gt;Qwiklab/Logbook: Migrate a MySQL Database to Google Cloud SQL&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Useful external link&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/6898?parent=catalog&quot;&gt;VM Migration: Modernize an Application Stack with GKE and MySQL | Qwiklabs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sat, 25 Jul 2020 08:00:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Set-up-and-Configure-a-Cloud-Environment-in-Google-Cloud-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Set-up-and-Configure-a-Cloud-Environment-in-Google-Cloud-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        <category>Kubernetes</category>
        
        <category>WordPress</category>
        
        <category>Secure VPC</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>Qlog: Automate Interactions with Contact Center AI: Challenge Lab</title>
        <description>&lt;p&gt;In this article, we will go through the lab &lt;strong&gt;GSP311&lt;/strong&gt; &lt;em&gt;&lt;a href=&quot;https://www.qwiklabs.com/focuses/12008?parent=catalog&quot;&gt;Automate Interactions with Contact Center AI: Challenge Lab&lt;/a&gt;&lt;/em&gt;, which is labeled as an expert-level exercise. You will practice the skills and knowledge for deploy Cloud Dataflow Pipeline to transcript audio files and store the data to BigQuery. You will also need to implement Data Loss Prevention API for redacting the sensitive data from the audio transcriptions (such as name, email, phone number, and SSN).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;The challenge contains 8 required tasks:&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Create a Regional Cloud Storage bucket&lt;/li&gt;
  &lt;li&gt;Create a Cloud Function&lt;/li&gt;
  &lt;li&gt;Create a BigQuery dataset&lt;/li&gt;
  &lt;li&gt;Create a Pub/Sub topic&lt;/li&gt;
  &lt;li&gt;Create a Regional Cloud Storage bucket with DFaudio folder&lt;/li&gt;
  &lt;li&gt;Deploy Dataflow pipeline&lt;/li&gt;
  &lt;li&gt;Process the sample audio files&lt;/li&gt;
  &lt;li&gt;Run a Data Loss Prevention Job&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;setting-up-the-environment&quot;&gt;Setting up the environment&lt;/h2&gt;

&lt;p&gt;First of all, open the Cloud Shell to clone the Speech Analysis Framework source repository:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/GoogleCloudPlatform/dataflow-contact-center-speech-analysis.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;task-1-create-a-cloud-storage-bucket&quot;&gt;Task 1: Create a Cloud Storage Bucket&lt;/h2&gt;

&lt;p&gt;Make sure you:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;create the bucket in the region &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-central1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;task-2-create-a-cloud-function&quot;&gt;Task 2: Create a Cloud Function&lt;/h2&gt;

&lt;p&gt;Make sure you:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;change the Trigger to &lt;strong&gt;Cloud Storage&lt;/strong&gt; and select &lt;strong&gt;Finalize&lt;/strong&gt; as the Event Type&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;In the Cloud Console, navigate to &lt;strong&gt;Cloud Functions&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Create a new function called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;saf-longrun-job-func&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Select &lt;strong&gt;Cloud Storage&lt;/strong&gt; from the dropdown for the &lt;strong&gt;Trigger&lt;/strong&gt; setting.&lt;/li&gt;
  &lt;li&gt;In the &lt;strong&gt;Event Type&lt;/strong&gt; dropdown, select &lt;strong&gt;Finalize/Create&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click on the &lt;strong&gt;BROWSE&lt;/strong&gt; button, and choose the bucket created in Task 1.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;591&quot; height=&quot;639&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp311-task2-create-cloud-function.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;591&quot; height=&quot;639&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp311-task2-create-cloud-function.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;6&quot;&gt;
  &lt;li&gt;Select the &lt;strong&gt;Runtime&lt;/strong&gt; to be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Node.js 8&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Open the &lt;a href=&quot;https://github.com/GoogleCloudPlatform/dataflow-contact-center-speech-analysis/tree/master/saf-longrun-job-func&quot;&gt;source repository&lt;/a&gt; in a new window.&lt;/li&gt;
  &lt;li&gt;Replace the &lt;strong&gt;INDEX.JS&lt;/strong&gt; AND &lt;strong&gt;PACKAGE.JSON&lt;/strong&gt; in the Cloud Function with the source codes from the repository.&lt;/li&gt;
  &lt;li&gt;Type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;safLongRunJobFunc&lt;/code&gt; in the &lt;strong&gt;Function to execute&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;ENVIRONMENT VARIABLES, NETWORKING, TIMEOUTS AND MORE&lt;/strong&gt;, ensure the region is configured to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;us-central1&lt;/code&gt; under the &lt;strong&gt;Advanced options&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CREATE&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-3-create-a-bigquery-dataset&quot;&gt;Task 3: Create a BigQuery Dataset&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;BigQuery&lt;/strong&gt;, click on &lt;strong&gt;CREATE DATASET&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Assign a Dataset ID, e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lab&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create dataset&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-4-create-cloud-pubsub-topic&quot;&gt;Task 4: Create Cloud Pub/Sub Topic&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;Pub/Sub&lt;/strong&gt; &amp;gt; &lt;strong&gt;Topics&lt;/strong&gt;, click on &lt;strong&gt;CREATE TOPIC&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Assign a Topic ID, e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;speech2text&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;Create Topic&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-5-create-a-cloud-storage-bucket-for-staging-contents&quot;&gt;Task 5: Create a Cloud Storage Bucket for Staging Contents&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;Cloud Storage&lt;/strong&gt;, click on the bucket created in Task 1.&lt;/li&gt;
  &lt;li&gt;Create a folder called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DFaudio&lt;/code&gt; in the bucket.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;task-6-deploy-a-cloud-dataflow-pipeline&quot;&gt;Task 6: Deploy a Cloud Dataflow Pipeline&lt;/h2&gt;

&lt;p&gt;In the Cloud Shell, run the following commands to deploy the Dataflow pipeline&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;dataflow-contact-center-speech-analysis/saf-longrun-job-dataflow

python &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; virtualenv &lt;span class=&quot;nb&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; python3
&lt;span class=&quot;nb&quot;&gt;source env&lt;/span&gt;/bin/activate
pip &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;apache-beam[gcp]
pip &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;dateparser

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROJECT_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=[&lt;/span&gt;YOUR_PROJECT_ID]
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TOPIC_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;speech2text
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BUCKET_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=[&lt;/span&gt;YOUR_BUCKET_NAME]
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;DATASET_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;lab
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TABLE_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;transcript

python3 saflongrunjobdataflow.py &lt;span class=&quot;nt&quot;&gt;--project&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PROJECT_ID&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--input_topic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;projects/&lt;span class=&quot;nv&quot;&gt;$PROJECT_ID&lt;/span&gt;/topics/&lt;span class=&quot;nv&quot;&gt;$TOPIC_NAME&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--runner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;DataflowRunner &lt;span class=&quot;nt&quot;&gt;--region&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;us-central1 &lt;span class=&quot;nt&quot;&gt;--temp_location&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;gs://&lt;span class=&quot;nv&quot;&gt;$BUCKET_NAME&lt;/span&gt;/tmp &lt;span class=&quot;nt&quot;&gt;--output_bigquery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$DATASET_NAME&lt;/span&gt;.&lt;span class=&quot;nv&quot;&gt;$TABLE_NAME&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--requirements_file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;requirements.txt&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;842&quot; height=&quot;808&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp311-task6-cloud-dataflow-pipeline.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;842&quot; height=&quot;808&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp311-task6-cloud-dataflow-pipeline.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-7-upload-sample-audio-files-for-processing&quot;&gt;Task 7: Upload Sample Audio Files for Processing&lt;/h2&gt;

&lt;p&gt;In the Cloud Shell, run the following commands to upload the sample audio files into your Audio Uploads Bucket:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# mono flac audio sample&lt;/span&gt;
gsutil &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-callid:1234567 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-stereo:false &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-pubsubtopicname:&lt;span class=&quot;nv&quot;&gt;$TOPIC_NAME&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-year:2019 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-month:11 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-day:06 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-starttime:1116 &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;gs://qwiklabs-bucket-gsp311/speech_commercial_mono.flac gs://&lt;span class=&quot;nv&quot;&gt;$BUCKET_NAME&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# stereo wav audio sample&lt;/span&gt;
gsutil &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-callid:1234567 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-stereo:true &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-pubsubtopicname:&lt;span class=&quot;nv&quot;&gt;$TOPIC_NAME&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-year:2019 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-month:11 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-day:06 &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; x-goog-meta-starttime:1116 &lt;span class=&quot;nb&quot;&gt;cp &lt;/span&gt;gs://qwiklabs-bucket-gsp311/speech_commercial_stereo.wav gs://&lt;span class=&quot;nv&quot;&gt;$BUCKET_NAME&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Q: What is the TOP named entity in the 5 audio files processed by the pipeline?
A: pair&lt;/p&gt;
&lt;/blockquote&gt;

&lt;figure&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;914&quot; height=&quot;847&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp311-task7-bigquery.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;914&quot; height=&quot;847&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts/qwiklabs/qwiklab-gsp311-task7-bigquery.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;h2 id=&quot;task-8-run-a-data-loss-prevention-job&quot;&gt;Task 8: Run a Data Loss Prevention Job&lt;/h2&gt;

&lt;p&gt;You must make a copy of your BigQuery table before running a Data Loss Prevention Job&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Navigate to &lt;strong&gt;BigQuery&lt;/strong&gt; in the Cloud Console&lt;/li&gt;
  &lt;li&gt;Select the table generated by the Dataflow pipeline.&lt;/li&gt;
  &lt;li&gt;Click on &lt;strong&gt;More&lt;/strong&gt; &amp;gt; &lt;strong&gt;Query settings&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Assign a Table name, e.g. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copied&lt;/code&gt;, then click &lt;strong&gt;Save&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;figure class=&quot;text-center&quot;&gt;
    
    
        &lt;amp-img on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;317&quot; height=&quot;314&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts//qwiklabs/qwiklab-gsp311-task8-copy-bigqury-table.webp&quot;&gt;
            &lt;amp-img fallback=&quot;&quot; on=&quot;tap:lightbox1&quot; role=&quot;button&quot; tabindex=&quot;0&quot; alt=&quot;&quot; width=&quot;317&quot; height=&quot;314&quot; layout=&quot;intrinsic&quot; src=&quot;/images/posts//qwiklabs/qwiklab-gsp311-task8-copy-bigqury-table.png&quot;&gt;&lt;/amp-img&gt;
        &lt;/amp-img&gt;
    
    
    
&lt;/figure&gt;

&lt;ol start=&quot;5&quot;&gt;
  &lt;li&gt;
    &lt;p&gt;Run the following SQL query:&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`[YOUR_PROJECT_ID].[DATASET_NAME].[TABLE]`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Select the copied table, then click on &lt;strong&gt;EXPORT&lt;/strong&gt; &amp;gt; &lt;strong&gt;Scan with DLP&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;In the &lt;em&gt;Create job or job trigger&lt;/em&gt; pane, assign a Job ID and then click &lt;strong&gt;CREATE&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Click &lt;strong&gt;CONFIRM CREATE&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Congratulations! You completed this challenge lab.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;Tasks 1 to 5 were pretty straightforward. If you prefer using the command line to create the resources, please refer to the &lt;a href=&quot;https://github.com/GoogleCloudPlatform/dataflow-contact-center-speech-analysis&quot;&gt;README file&lt;/a&gt; of the Speech Analysis Framework in the GitHub repository. You can also find the commands to deploy the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;saflongrunjobdataflow.py&lt;/code&gt; Python script in Task 6 and the SQL query for getting the answer in Task 7.&lt;/p&gt;

&lt;p&gt;Only Task 7 was a little tricky. You will get stuck if you try to make a copy of the table using the &lt;strong&gt;COPY TABLE&lt;/strong&gt; button in the BigQuery console. It can copy the table structure but cannot copy the data in the table. Once you know how to correctly clone the table, the task is just a piece of cake.&lt;/p&gt;

&lt;h2 id=&quot;demonstration-video&quot;&gt;Demonstration Video&lt;/h2&gt;

&lt;amp-youtube width=&quot;480&quot; height=&quot;270&quot; layout=&quot;responsive&quot; data-videoid=&quot;uiKc2_i8IOM&quot; data-param-rel=&quot;0&quot;&gt;
    &lt;div fallback=&quot;&quot;&gt;
        &lt;p&gt;This browser does not support the YouTube video player. &lt;a href=&quot;https://youtu.be/uiKc2_i8IOM&quot; target=&quot;_blank&quot;&gt;Watch on YouTube&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/amp-youtube&gt;

&lt;amp-analytics type=&quot;gtag&quot; data-credentials=&quot;include&quot;&gt;
    &lt;script type=&quot;application/json&quot;&gt;
        {
            &quot;vars&quot; : {
                &quot;gtag_id&quot;: &quot;UA-72575541-9&quot;,
                &quot;config&quot; : {
                    &quot;UA-72575541-9&quot;: { &quot;groups&quot;: &quot;default&quot; }
                }
            },
            &quot;triggers&quot;: {
                &quot;videoPlay&quot;: {
                    &quot;on&quot;: &quot;video-play&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='uiKc2_i8IOM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Started&quot;,
                        &quot;event_label&quot;: &quot;GSP311 Automate Interactions with Contact Center AI: Challenge Lab | youtu.be/uiKc2_i8IOM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoPause&quot;: {
                    &quot;on&quot;: &quot;video-pause&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='uiKc2_i8IOM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_name&quot;: &quot;Video Paused&quot;,
                        &quot;event_label&quot;: &quot;GSP311 Automate Interactions with Contact Center AI: Challenge Lab | youtu.be/uiKc2_i8IOM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                },
                &quot;videoEnded&quot;: {
                    &quot;on&quot;: &quot;video-ended&quot;,
                    &quot;request&quot;: &quot;event&quot;,
                    &quot;selector&quot;: &quot;amp-youtube[data-videoid='uiKc2_i8IOM']&quot;,
                    &quot;vars&quot;: {
                        &quot;event_name&quot;: &quot;Video Ended&quot;,
                        &quot;event_category&quot;: &quot;AMP YouTube player (client-side)&quot;,
                        &quot;event_label&quot;: &quot;GSP311 Automate Interactions with Contact Center AI: Challenge Lab | youtu.be/uiKc2_i8IOM&quot;,
                        &quot;method&quot;: &quot;Google&quot;
                    }
                }
            }
        }
    &lt;/script&gt;
&lt;/amp-analytics&gt;

&lt;div class=&quot;language-ts highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;59&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Storage&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Bucket&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;58&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Function&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;04&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;07&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;BigQuery&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Dataset&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;05&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Pub&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Topic&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;05&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;52&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Create&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Storage&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Bucket&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Staging&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contents&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;06&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Deploy&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cloud&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Dataflow&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Pipeline&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;36&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Upload&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Sample&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Audio&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Files&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Processing&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;05&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Task&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Run&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Data&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Loss&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Prevention&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Job&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Keep on reading&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/blog/qwiklabs/Integrate-with-Machine-Learning-APIs-Challenge-Lab&quot;&gt;Qwiklabs/Logbook: Integrate with Machine Learning APIs: Challenge Lab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Wed, 22 Jul 2020 04:32:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/qwiklabs/Automate-Interactions-with-Contact-Center-AI-Challenge-Lab</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/qwiklabs/Automate-Interactions-with-Contact-Center-AI-Challenge-Lab</guid>
        
        <category>Qwiklabs</category>
        
        <category>Google Cloud</category>
        
        <category>Logbook</category>
        
        
        <category>Cloud</category>
        
      </item>
    
      <item>
        <title>AMP Now âš¡</title>
        <description>&lt;p&gt;This website is mobile-first and speeds up with &lt;abbr title=&quot;Accelerated Mobile Pages&quot;&gt;AMP&lt;/abbr&gt; right now. Almost the entire site is &lt;abbr title=&quot;Accelerated Mobile Pages&quot;&gt;AMP&lt;/abbr&gt; validated, except a very few pages. Youâ€™ll load our pages on mobile devices much faster than before. Our world, especially the web/internet, is evolving fast. Of course, content is the king for a blog, but &lt;abbr title=&quot;User Experience&quot;&gt;UX&lt;/abbr&gt; also plays a significant role in its success. &lt;a href=&quot;/blog/2020/06/01/enjoy-our-new-theme&quot;&gt;After the new theme released in the last month&lt;/a&gt;, this site recorded a reduction of bounce rate for over 25% and an increase of average session duration for nearly 185%. The impact of &lt;abbr title=&quot;User Experience&quot;&gt;UX&lt;/abbr&gt; can be tremendous. Not only the visual design of the web but also the loading speed. Users do not want to wait for page loading. The &lt;abbr title=&quot;Accelerated Mobile Pages&quot;&gt;AMP&lt;/abbr&gt;-Cached pages will be delivered quickly via Googleâ€™s Content Delivery Networks (CDN) with very small latencies. With the optimized JS and CSS, the &lt;abbr title=&quot;Accelerated Mobile Pages&quot;&gt;AMP&lt;/abbr&gt; pages will also provide smoother web experience even being loaded with slow 3G networks or low-end mobile devices. I wish the enhancement will help people worldwide to access and learn the content and knowledge shared on this website. Also, youâ€™ll better enjoy this site.&lt;/p&gt;

&lt;h3 id=&quot;new-features-with-using-amp-as-a-framework&quot;&gt;New Features with using &lt;abbr title=&quot;Accelerated Mobile Pages&quot;&gt;AMP&lt;/abbr&gt; as a framework&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://amp.dev/documentation/components/amp-fx-collection/?format=websites#float-in-top,-float-in-bottom&quot;&gt;Auto-hide header&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://amp.dev/documentation/components/amp-lightbox/&quot;&gt;Lightbox&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;further-step-that-needs-help&quot;&gt;Further step that needs help&lt;/h3&gt;

&lt;p&gt;Regarding the article &lt;a href=&quot;/blog/qwiklabs/Qwiklabs-User-Tips-for-Learning_Google_Cloud_Platform&quot;&gt;Learning Google Cloud Platform on Qwiklabs: Learning Map, Assistive Tool and Tips (2020)&lt;/a&gt;, the &lt;em&gt;List of Quests&lt;/em&gt; and the &lt;em&gt;List of Labs&lt;/em&gt; currently use a jQuery plugin called &lt;a href=&quot;https://datatables.net/&quot;&gt;DataTables&lt;/a&gt; to facilitate table sorting and filtering. Since the &lt;abbr title=&quot;Accelerated Mobile Pages&quot;&gt;AMP&lt;/abbr&gt; framework highly restricts the JavaScript and CSS available for a web page, it forces to seek a lightweight and dependency-free JavaScript solution for replacement. If you have any suggestions, I hope you can kindly tell me via the Disqus comments below.&lt;/p&gt;
</description>
        <pubDate>Tue, 14 Jul 2020 08:00:00 +0000</pubDate>
        <link>https://chriskyfung.github.io/blog/amp-now</link>
        <guid isPermaLink="true">https://chriskyfung.github.io/blog/amp-now</guid>
        
        <category>Changelog</category>
        
        
        <category>Announcement</category>
        
      </item>
    
  </channel>
</rss>
